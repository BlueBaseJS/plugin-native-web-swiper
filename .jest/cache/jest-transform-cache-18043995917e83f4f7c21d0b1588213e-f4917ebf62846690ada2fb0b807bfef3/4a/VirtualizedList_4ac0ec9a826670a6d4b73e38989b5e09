6339d4dadb1b0e896e8d57f0cbf68fcc
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var Batchinator = require('Batchinator');

var FillRateHelper = require('FillRateHelper');

var PropTypes = require('prop-types');

var React = require('React');

var ReactNative = require('ReactNative');

var RefreshControl = require('RefreshControl');

var ScrollView = require('ScrollView');

var StyleSheet = require('StyleSheet');

var UIManager = require('UIManager');

var View = require('View');

var ViewabilityHelper = require('ViewabilityHelper');

var flattenStyle = require('flattenStyle');

var infoLog = require('infoLog');

var invariant = require('fbjs/lib/invariant');

var warning = require('fbjs/lib/warning');

var _require = require('VirtualizeUtils'),
    computeWindowedRenderLimits = _require.computeWindowedRenderLimits;

var _usedIndexForKey = false;
var _keylessItemComponentName = '';

var VirtualizedList = function (_React$PureComponent) {
  (0, _inherits2.default)(VirtualizedList, _React$PureComponent);
  (0, _createClass2.default)(VirtualizedList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      var animated = params ? params.animated : true;
      var veryLast = this.props.getItemCount(this.props.data) - 1;

      var frame = this._getFrameMetricsApprox(veryLast);

      var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);

      this._scrollRef.scrollTo(this.props.horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      var _this$props = this.props,
          data = _this$props.data,
          horizontal = _this$props.horizontal,
          getItemCount = _this$props.getItemCount,
          getItemLayout = _this$props.getItemLayout,
          onScrollToIndexFailed = _this$props.onScrollToIndexFailed;
      var animated = params.animated,
          index = params.index,
          viewOffset = params.viewOffset,
          viewPosition = params.viewPosition;
      invariant(index >= 0 && index < getItemCount(data), "scrollToIndex out of range: " + index + " vs " + (getItemCount(data) - 1));

      if (!getItemLayout && index > this._highestMeasuredFrameIndex) {
        invariant(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');
        onScrollToIndexFailed({
          averageItemLength: this._averageCellLength,
          highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,
          index: index
        });
        return;
      }

      var frame = this._getFrameMetricsApprox(index);

      var offset = Math.max(0, frame.offset - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);

      this._scrollRef.scrollTo(horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      var item = params.item;
      var _this$props2 = this.props,
          data = _this$props2.data,
          getItem = _this$props2.getItem,
          getItemCount = _this$props2.getItemCount;
      var itemCount = getItemCount(data);

      for (var _index = 0; _index < itemCount; _index++) {
        if (getItem(data, _index) === item) {
          this.scrollToIndex((0, _objectSpread2.default)({}, params, {
            index: _index
          }));
          break;
        }
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      var animated = params.animated,
          offset = params.offset;

      this._scrollRef.scrollTo(this.props.horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref.recordInteraction();
      });

      this._viewabilityTuples.forEach(function (t) {
        t.viewabilityHelper.recordInteraction();
      });

      this._updateViewableItems(this.props.data);
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      this._scrollRef.flashScrollIndicators();
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._scrollRef && this._scrollRef.getScrollResponder) {
        return this._scrollRef.getScrollResponder();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._scrollRef && this._scrollRef.getScrollableNode) {
        return this._scrollRef.getScrollableNode();
      } else {
        return ReactNative.findNodeHandle(this._scrollRef);
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._scrollRef) {
        this._scrollRef.setNativeProps(props);
      }
    }
  }, {
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedList: {
          getScrollMetrics: this._getScrollMetrics,
          horizontal: this.props.horizontal,
          getOutermostParentListRef: this._getOutermostParentListRef,
          getNestedChildState: this._getNestedChildState,
          registerAsNestedChild: this._registerAsNestedChild,
          unregisterAsNestedChild: this._unregisterAsNestedChild
        }
      };
    }
  }, {
    key: "_getCellKey",
    value: function _getCellKey() {
      return this.context.virtualizedCell && this.context.virtualizedCell.cellKey || 'rootList';
    }
  }, {
    key: "hasMore",
    value: function hasMore() {
      return this._hasMore;
    }
  }]);

  function VirtualizedList(_props, context) {
    var _this;

    (0, _classCallCheck2.default)(this, VirtualizedList);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf3.default)(VirtualizedList).call(this, _props, context));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "props", void 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_getScrollMetrics", function () {
      return _this._scrollMetrics;
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_getOutermostParentListRef", function () {
      if (_this._isNestedWithSameOrientation()) {
        return _this.context.virtualizedList.getOutermostParentListRef();
      } else {
        return (0, _assertThisInitialized2.default)(_this);
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_getNestedChildState", function (key) {
      var existingChildData = _this._nestedChildLists.get(key);

      return existingChildData && existingChildData.state;
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_registerAsNestedChild", function (childList) {
      var childListsInCell = _this._cellKeysToChildListKeys.get(childList.cellKey) || new Set();
      childListsInCell.add(childList.key);

      _this._cellKeysToChildListKeys.set(childList.cellKey, childListsInCell);

      var existingChildData = _this._nestedChildLists.get(childList.key);

      invariant(!(existingChildData && existingChildData.ref !== null), 'A VirtualizedList contains a cell which itself contains ' + 'more than one VirtualizedList of the same orientation as the parent ' + 'list. You must pass a unique listKey prop to each sibling list.');

      _this._nestedChildLists.set(childList.key, {
        ref: childList.ref,
        state: null
      });

      if (_this._hasInteracted) {
        childList.ref.recordInteraction();
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_unregisterAsNestedChild", function (childList) {
      _this._nestedChildLists.set(childList.key, {
        ref: null,
        state: childList.state
      });
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "state", void 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onUpdateSeparators", function (keys, newProps) {
      keys.forEach(function (key) {
        var ref = key != null && _this._cellRefs[key];
        ref && ref.updateSeparatorProps(newProps);
      });
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_averageCellLength", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_cellKeysToChildListKeys", new Map());
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_cellRefs", {});
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_fillRateHelper", void 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_frames", {});
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_footerLength", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_hasDataChangedSinceEndReached", true);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_hasInteracted", false);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_hasMore", false);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_hasWarned", {});
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_highestMeasuredFrameIndex", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_headerLength", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_indicesToKeys", new Map());
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_hasDoneInitialScroll", false);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_nestedChildLists", new Map());
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_offsetFromParentVirtualizedList", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_prevParentOffset", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_scrollMetrics", {
      contentLength: 0,
      dOffset: 0,
      dt: 10,
      offset: 0,
      timestamp: 0,
      velocity: 0,
      visibleLength: 0
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_scrollRef", null);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_sentEndForContentLength", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_totalCellLength", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_totalCellsMeasured", 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_updateCellsToRenderBatcher", void 0);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_viewabilityTuples", []);
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_captureScrollRef", function (ref) {
      _this._scrollRef = ref;
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_defaultRenderScrollComponent", function (props) {
      var onRefresh = props.onRefresh;

      if (_this._isNestedWithSameOrientation()) {
        return React.createElement(View, props);
      } else if (onRefresh) {
        invariant(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify(props.refreshing) + '`');
        return React.createElement(ScrollView, (0, _extends2.default)({}, props, {
          refreshControl: props.refreshControl == null ? React.createElement(RefreshControl, {
            refreshing: props.refreshing,
            onRefresh: onRefresh,
            progressViewOffset: props.progressViewOffset
          }) : props.refreshControl
        }));
      } else {
        return React.createElement(ScrollView, props);
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onCellUnmount", function (cellKey) {
      var curr = _this._frames[cellKey];

      if (curr) {
        _this._frames[cellKey] = (0, _objectSpread2.default)({}, curr, {
          inLayout: false
        });
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onLayout", function (e) {
      if (_this._isNestedWithSameOrientation()) {
        _this.measureLayoutRelativeToContainingList();
      } else {
        _this._scrollMetrics.visibleLength = _this._selectLength(e.nativeEvent.layout);
      }

      _this.props.onLayout && _this.props.onLayout(e);

      _this._scheduleCellsToRenderUpdate();

      _this._maybeCallOnEndReached();
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onLayoutEmpty", function (e) {
      _this.props.onLayout && _this.props.onLayout(e);
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onLayoutFooter", function (e) {
      _this._footerLength = _this._selectLength(e.nativeEvent.layout);
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onLayoutHeader", function (e) {
      _this._headerLength = _this._selectLength(e.nativeEvent.layout);
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onContentSizeChange", function (width, height) {
      if (width > 0 && height > 0 && _this.props.initialScrollIndex != null && _this.props.initialScrollIndex > 0 && !_this._hasDoneInitialScroll) {
        _this.scrollToIndex({
          animated: false,
          index: _this.props.initialScrollIndex
        });

        _this._hasDoneInitialScroll = true;
      }

      if (_this.props.onContentSizeChange) {
        _this.props.onContentSizeChange(width, height);
      }

      _this._scrollMetrics.contentLength = _this._selectLength({
        height: height,
        width: width
      });

      _this._scheduleCellsToRenderUpdate();

      _this._maybeCallOnEndReached();
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_convertParentScrollMetrics", function (metrics) {
      var offset = metrics.offset - _this._offsetFromParentVirtualizedList;
      var visibleLength = metrics.visibleLength;
      var dOffset = offset - _this._scrollMetrics.offset;
      var contentLength = _this._scrollMetrics.contentLength;
      return {
        visibleLength: visibleLength,
        contentLength: contentLength,
        offset: offset,
        dOffset: dOffset
      };
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onScroll", function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScroll(e);
      });

      if (_this.props.onScroll) {
        _this.props.onScroll(e);
      }

      var timestamp = e.timeStamp;

      var visibleLength = _this._selectLength(e.nativeEvent.layoutMeasurement);

      var contentLength = _this._selectLength(e.nativeEvent.contentSize);

      var offset = _this._selectOffset(e.nativeEvent.contentOffset);

      var dOffset = offset - _this._scrollMetrics.offset;

      if (_this._isNestedWithSameOrientation()) {
        if (_this._scrollMetrics.contentLength === 0) {
          return;
        }

        var _this$_convertParentS = _this._convertParentScrollMetrics({
          visibleLength: visibleLength,
          offset: offset
        });

        visibleLength = _this$_convertParentS.visibleLength;
        contentLength = _this$_convertParentS.contentLength;
        offset = _this$_convertParentS.offset;
        dOffset = _this$_convertParentS.dOffset;
      }

      var dt = _this._scrollMetrics.timestamp ? Math.max(1, timestamp - _this._scrollMetrics.timestamp) : 1;
      var velocity = dOffset / dt;

      if (dt > 500 && _this._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this._hasWarned.perf) {
        infoLog('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', {
          dt: dt,
          prevDt: _this._scrollMetrics.dt,
          contentLength: contentLength
        });
        _this._hasWarned.perf = true;
      }

      _this._scrollMetrics = {
        contentLength: contentLength,
        dt: dt,
        dOffset: dOffset,
        offset: offset,
        timestamp: timestamp,
        velocity: velocity,
        visibleLength: visibleLength
      };

      _this._updateViewableItems(_this.props.data);

      if (!_this.props) {
        return;
      }

      _this._maybeCallOnEndReached();

      if (velocity !== 0) {
        _this._fillRateHelper.activate();
      }

      _this._computeBlankness();

      _this._scheduleCellsToRenderUpdate();
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onScrollBeginDrag", function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScrollBeginDrag(e);
      });

      _this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.recordInteraction();
      });

      _this._hasInteracted = true;
      _this.props.onScrollBeginDrag && _this.props.onScrollBeginDrag(e);
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onScrollEndDrag", function (e) {
      var velocity = e.nativeEvent.velocity;

      if (velocity) {
        _this._scrollMetrics.velocity = _this._selectOffset(velocity);
      }

      _this._computeBlankness();

      _this.props.onScrollEndDrag && _this.props.onScrollEndDrag(e);
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_onMomentumScrollEnd", function (e) {
      _this._scrollMetrics.velocity = 0;

      _this._computeBlankness();

      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd(e);
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_updateCellsToRender", function () {
      var _this$props3 = _this.props,
          data = _this$props3.data,
          getItemCount = _this$props3.getItemCount,
          onEndReachedThreshold = _this$props3.onEndReachedThreshold;

      var isVirtualizationDisabled = _this._isVirtualizationDisabled();

      _this._updateViewableItems(data);

      if (!data) {
        return;
      }

      _this.setState(function (state) {
        var newState;

        if (!isVirtualizationDisabled) {
          if (_this._scrollMetrics.visibleLength) {
            if (!_this.props.initialScrollIndex || _this._scrollMetrics.offset) {
              newState = computeWindowedRenderLimits(_this.props, state, _this._getFrameMetricsApprox, _this._scrollMetrics);
            }
          }
        } else {
          var _this$_scrollMetrics = _this._scrollMetrics,
              contentLength = _this$_scrollMetrics.contentLength,
              offset = _this$_scrollMetrics.offset,
              visibleLength = _this$_scrollMetrics.visibleLength;
          var distanceFromEnd = contentLength - visibleLength - offset;
          var renderAhead = distanceFromEnd < onEndReachedThreshold * visibleLength ? _this.props.maxToRenderPerBatch : 0;
          newState = {
            first: 0,
            last: Math.min(state.last + renderAhead, getItemCount(data) - 1)
          };
        }

        if (newState && _this._nestedChildLists.size > 0) {
          var newFirst = newState.first;
          var newLast = newState.last;

          for (var ii = newFirst; ii <= newLast; ii++) {
            var cellKeyForIndex = _this._indicesToKeys.get(ii);

            var childListKeys = cellKeyForIndex && _this._cellKeysToChildListKeys.get(cellKeyForIndex);

            if (!childListKeys) {
              continue;
            }

            var someChildHasMore = false;

            for (var _iterator = childListKeys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === "function" ? typeof Symbol === "function" ? Symbol.iterator : "@@iterator" : "@@iterator"]();;) {
              var _ref;

              if (_isArray) {
                if (_i >= _iterator.length) break;
                _ref = _iterator[_i++];
              } else {
                _i = _iterator.next();
                if (_i.done) break;
                _ref = _i.value;
              }

              var _childKey = _ref;

              var childList = _this._nestedChildLists.get(_childKey);

              if (childList && childList.ref && childList.ref.hasMore()) {
                someChildHasMore = true;
                break;
              }
            }

            if (someChildHasMore) {
              newState.last = ii;
              break;
            }
          }
        }

        return newState;
      });
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_createViewToken", function (index, isViewable) {
      var _this$props4 = _this.props,
          data = _this$props4.data,
          getItem = _this$props4.getItem,
          keyExtractor = _this$props4.keyExtractor;
      var item = getItem(data, index);
      return {
        index: index,
        item: item,
        key: keyExtractor(item, index),
        isViewable: isViewable
      };
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_getFrameMetricsApprox", function (index) {
      var frame = _this._getFrameMetrics(index);

      if (frame && frame.index === index) {
        return frame;
      } else {
        var getItemLayout = _this.props.getItemLayout;
        invariant(!getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');
        return {
          length: _this._averageCellLength,
          offset: _this._averageCellLength * index
        };
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_getFrameMetrics", function (index) {
      var _this$props5 = _this.props,
          data = _this$props5.data,
          getItem = _this$props5.getItem,
          getItemCount = _this$props5.getItemCount,
          getItemLayout = _this$props5.getItemLayout,
          keyExtractor = _this$props5.keyExtractor;
      invariant(getItemCount(data) > index, 'Tried to get frame for out of range index ' + index);
      var item = getItem(data, index);

      var frame = item && _this._frames[keyExtractor(item, index)];

      if (!frame || frame.index !== index) {
        if (getItemLayout) {
          frame = getItemLayout(data, index);

          if (__DEV__) {
            var frameType = PropTypes.shape({
              length: PropTypes.number.isRequired,
              offset: PropTypes.number.isRequired,
              index: PropTypes.number.isRequired
            }).isRequired;
            PropTypes.checkPropTypes({
              frame: frameType
            }, {
              frame: frame
            }, 'frame', 'VirtualizedList.getItemLayout');
          }
        }
      }

      return frame;
    });
    invariant(!_props.onScroll || !_props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');
    invariant(_props.windowSize > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');
    _this._fillRateHelper = new FillRateHelper(_this._getFrameMetrics);
    _this._updateCellsToRenderBatcher = new Batchinator(_this._updateCellsToRender, _this.props.updateCellsBatchingPeriod);

    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityHelper: new ViewabilityHelper(pair.viewabilityConfig),
          onViewableItemsChanged: pair.onViewableItemsChanged
        };
      });
    } else if (_this.props.onViewableItemsChanged) {
      _this._viewabilityTuples.push({
        viewabilityHelper: new ViewabilityHelper(_this.props.viewabilityConfig),
        onViewableItemsChanged: _this.props.onViewableItemsChanged
      });
    }

    var initialState = {
      first: _this.props.initialScrollIndex || 0,
      last: Math.min(_this.props.getItemCount(_this.props.data), (_this.props.initialScrollIndex || 0) + _this.props.initialNumToRender) - 1
    };

    if (_this._isNestedWithSameOrientation()) {
      var storedState = _this.context.virtualizedList.getNestedChildState(_this.props.listKey || _this._getCellKey());

      if (storedState) {
        initialState = storedState;
        _this.state = storedState;
        _this._frames = storedState.frames;
      }
    }

    _this.state = initialState;
    return _this;
  }

  (0, _createClass2.default)(VirtualizedList, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.virtualizedList.registerAsNestedChild({
          cellKey: this._getCellKey(),
          key: this.props.listKey || this._getCellKey(),
          ref: this
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.virtualizedList.unregisterAsNestedChild({
          key: this.props.listKey || this._getCellKey(),
          state: {
            first: this.state.first,
            last: this.state.last,
            frames: this._frames
          }
        });
      }

      this._updateViewableItems(null);

      this._updateCellsToRenderBatcher.dispose({
        abort: true
      });

      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.dispose();
      });

      this._fillRateHelper.deactivateAndFlush();
    }
  }, {
    key: "_pushCells",
    value: function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {
      var _this2 = this;

      var _this$props6 = this.props,
          CellRendererComponent = _this$props6.CellRendererComponent,
          ItemSeparatorComponent = _this$props6.ItemSeparatorComponent,
          data = _this$props6.data,
          getItem = _this$props6.getItem,
          getItemCount = _this$props6.getItemCount,
          horizontal = _this$props6.horizontal,
          keyExtractor = _this$props6.keyExtractor;
      var stickyOffset = this.props.ListHeaderComponent ? 1 : 0;
      var end = getItemCount(data) - 1;
      var prevCellKey;
      last = Math.min(end, last);

      var _loop = function _loop(ii) {
        var item = getItem(data, ii);
        var key = keyExtractor(item, ii);

        _this2._indicesToKeys.set(ii, key);

        if (stickyIndicesFromProps.has(ii + stickyOffset)) {
          stickyHeaderIndices.push(cells.length);
        }

        cells.push(React.createElement(CellRenderer, {
          CellRendererComponent: CellRendererComponent,
          ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,
          cellKey: key,
          fillRateHelper: _this2._fillRateHelper,
          horizontal: horizontal,
          index: ii,
          inversionStyle: inversionStyle,
          item: item,
          key: key,
          prevCellKey: prevCellKey,
          onUpdateSeparators: _this2._onUpdateSeparators,
          onLayout: function onLayout(e) {
            return _this2._onCellLayout(e, key, ii);
          },
          onUnmount: _this2._onCellUnmount,
          parentProps: _this2.props,
          ref: function ref(_ref2) {
            _this2._cellRefs[key] = _ref2;
          }
        }));
        prevCellKey = key;
      };

      for (var ii = first; ii <= last; ii++) {
        _loop(ii);
      }
    }
  }, {
    key: "_isVirtualizationDisabled",
    value: function _isVirtualizationDisabled() {
      return this.props.disableVirtualization;
    }
  }, {
    key: "_isNestedWithSameOrientation",
    value: function _isNestedWithSameOrientation() {
      var nestedContext = this.context.virtualizedList;
      return !!(nestedContext && !!nestedContext.horizontal === !!this.props.horizontal);
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      if (__DEV__) {
        var flatStyles = flattenStyle(this.props.contentContainerStyle);
        warning(flatStyles == null || flatStyles.flexWrap !== 'wrap', '`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');
      }

      var _this$props7 = this.props,
          ListEmptyComponent = _this$props7.ListEmptyComponent,
          ListFooterComponent = _this$props7.ListFooterComponent,
          ListHeaderComponent = _this$props7.ListHeaderComponent;
      var _this$props8 = this.props,
          data = _this$props8.data,
          horizontal = _this$props8.horizontal;

      var isVirtualizationDisabled = this._isVirtualizationDisabled();

      var inversionStyle = this.props.inverted ? this.props.horizontal ? styles.horizontallyInverted : styles.verticallyInverted : null;
      var cells = [];
      var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);
      var stickyHeaderIndices = [];

      if (ListHeaderComponent) {
        if (stickyIndicesFromProps.has(0)) {
          stickyHeaderIndices.push(0);
        }

        var element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent : React.createElement(ListHeaderComponent, null);
        cells.push(React.createElement(VirtualizedCellWrapper, {
          cellKey: this._getCellKey() + '-header',
          key: "$header"
        }, React.createElement(View, {
          onLayout: this._onLayoutHeader,
          style: StyleSheet.compose(inversionStyle, this.props.ListHeaderComponentStyle)
        }, element)));
      }

      var itemCount = this.props.getItemCount(data);

      if (itemCount > 0) {
        _usedIndexForKey = false;
        _keylessItemComponentName = '';
        var spacerKey = !horizontal ? 'height' : 'width';
        var lastInitialIndex = this.props.initialScrollIndex ? -1 : this.props.initialNumToRender - 1;
        var _this$state = this.state,
            first = _this$state.first,
            last = _this$state.last;

        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, 0, lastInitialIndex, inversionStyle);

        var firstAfterInitial = Math.max(lastInitialIndex + 1, first);

        if (!isVirtualizationDisabled && first > lastInitialIndex + 1) {
          var insertedStickySpacer = false;

          if (stickyIndicesFromProps.size > 0) {
            var stickyOffset = ListHeaderComponent ? 1 : 0;

            for (var ii = firstAfterInitial - 1; ii > lastInitialIndex; ii--) {
              if (stickyIndicesFromProps.has(ii + stickyOffset)) {
                var initBlock = this._getFrameMetricsApprox(lastInitialIndex);

                var stickyBlock = this._getFrameMetricsApprox(ii);

                var leadSpace = stickyBlock.offset - initBlock.offset;
                cells.push(React.createElement(View, {
                  key: "$sticky_lead",
                  style: (0, _defineProperty2.default)({}, spacerKey, leadSpace)
                }));

                this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, ii, ii, inversionStyle);

                var trailSpace = this._getFrameMetricsApprox(first).offset - (stickyBlock.offset + stickyBlock.length);
                cells.push(React.createElement(View, {
                  key: "$sticky_trail",
                  style: (0, _defineProperty2.default)({}, spacerKey, trailSpace)
                }));
                insertedStickySpacer = true;
                break;
              }
            }
          }

          if (!insertedStickySpacer) {
            var _initBlock = this._getFrameMetricsApprox(lastInitialIndex);

            var firstSpace = this._getFrameMetricsApprox(first).offset - (_initBlock.offset + _initBlock.length);

            cells.push(React.createElement(View, {
              key: "$lead_spacer",
              style: (0, _defineProperty2.default)({}, spacerKey, firstSpace)
            }));
          }
        }

        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, firstAfterInitial, last, inversionStyle);

        if (!this._hasWarned.keys && _usedIndexForKey) {
          console.warn('VirtualizedList: missing keys for items, make sure to specify a key property on each ' + 'item or provide a custom keyExtractor.', _keylessItemComponentName);
          this._hasWarned.keys = true;
        }

        if (!isVirtualizationDisabled && last < itemCount - 1) {
          var lastFrame = this._getFrameMetricsApprox(last);

          var end = this.props.getItemLayout ? itemCount - 1 : Math.min(itemCount - 1, this._highestMeasuredFrameIndex);

          var endFrame = this._getFrameMetricsApprox(end);

          var tailSpacerLength = endFrame.offset + endFrame.length - (lastFrame.offset + lastFrame.length);
          cells.push(React.createElement(View, {
            key: "$tail_spacer",
            style: (0, _defineProperty2.default)({}, spacerKey, tailSpacerLength)
          }));
        }
      } else if (ListEmptyComponent) {
        var _element = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent : React.createElement(ListEmptyComponent, null);

        cells.push(React.cloneElement(_element, {
          key: '$empty',
          onLayout: function onLayout(event) {
            _this3._onLayoutEmpty(event);

            if (_element.props.onLayout) {
              _element.props.onLayout(event);
            }
          },
          style: [_element.props.style, inversionStyle]
        }));
      }

      if (ListFooterComponent) {
        var _element2 = React.isValidElement(ListFooterComponent) ? ListFooterComponent : React.createElement(ListFooterComponent, null);

        cells.push(React.createElement(VirtualizedCellWrapper, {
          cellKey: this._getCellKey() + '-footer',
          key: "$footer"
        }, React.createElement(View, {
          onLayout: this._onLayoutFooter,
          style: StyleSheet.compose(inversionStyle, this.props.ListFooterComponentStyle)
        }, _element2)));
      }

      var scrollProps = (0, _objectSpread2.default)({}, this.props, {
        onContentSizeChange: this._onContentSizeChange,
        onLayout: this._onLayout,
        onScroll: this._onScroll,
        onScrollBeginDrag: this._onScrollBeginDrag,
        onScrollEndDrag: this._onScrollEndDrag,
        onMomentumScrollEnd: this._onMomentumScrollEnd,
        scrollEventThrottle: this.props.scrollEventThrottle,
        invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,
        stickyHeaderIndices: stickyHeaderIndices
      });

      if (inversionStyle && itemCount !== 0) {
        scrollProps.style = [inversionStyle, this.props.style];
      }

      this._hasMore = this.state.last < this.props.getItemCount(this.props.data) - 1;
      var ret = React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {
        ref: this._captureScrollRef
      }, cells);

      if (this.props.debug) {
        return React.createElement(View, {
          style: {
            flex: 1
          }
        }, ret, this._renderDebugOverlay());
      } else {
        return ret;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this$props9 = this.props,
          data = _this$props9.data,
          extraData = _this$props9.extraData;

      if (data !== prevProps.data || extraData !== prevProps.extraData) {
        this._hasDataChangedSinceEndReached = true;

        this._viewabilityTuples.forEach(function (tuple) {
          tuple.viewabilityHelper.resetViewableIndices();
        });
      }

      this._scheduleCellsToRenderUpdate();
    }
  }, {
    key: "_computeBlankness",
    value: function _computeBlankness() {
      this._fillRateHelper.computeBlankness(this.props, this.state, this._scrollMetrics);
    }
  }, {
    key: "_onCellLayout",
    value: function _onCellLayout(e, cellKey, index) {
      var layout = e.nativeEvent.layout;
      var next = {
        offset: this._selectOffset(layout),
        length: this._selectLength(layout),
        index: index,
        inLayout: true
      };
      var curr = this._frames[cellKey];

      if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {
        this._totalCellLength += next.length - (curr ? curr.length : 0);
        this._totalCellsMeasured += curr ? 0 : 1;
        this._averageCellLength = this._totalCellLength / this._totalCellsMeasured;
        this._frames[cellKey] = next;
        this._highestMeasuredFrameIndex = Math.max(this._highestMeasuredFrameIndex, index);

        this._scheduleCellsToRenderUpdate();
      } else {
        this._frames[cellKey].inLayout = true;
      }

      var childListKeys = this._cellKeysToChildListKeys.get(cellKey);

      if (childListKeys) {
        for (var _iterator2 = childListKeys, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
          var _ref7;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref7 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref7 = _i2.value;
          }

          var _childKey2 = _ref7;

          var childList = this._nestedChildLists.get(_childKey2);

          childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();
        }
      }

      this._computeBlankness();
    }
  }, {
    key: "measureLayoutRelativeToContainingList",
    value: function measureLayoutRelativeToContainingList() {
      var _this4 = this;

      try {
        UIManager.measureLayout(ReactNative.findNodeHandle(this), ReactNative.findNodeHandle(this.context.virtualizedList.getOutermostParentListRef()), function (error) {
          console.warn("VirtualizedList: Encountered an error while measuring a list's" + ' offset from its containing VirtualizedList.');
        }, function (x, y, width, height) {
          _this4._offsetFromParentVirtualizedList = _this4._selectOffset({
            x: x,
            y: y
          });
          _this4._scrollMetrics.contentLength = _this4._selectLength({
            width: width,
            height: height
          });

          var scrollMetrics = _this4._convertParentScrollMetrics(_this4.context.virtualizedList.getScrollMetrics());

          _this4._scrollMetrics.visibleLength = scrollMetrics.visibleLength;
          _this4._scrollMetrics.offset = scrollMetrics.offset;
        });
      } catch (error) {
        console.warn('measureLayoutRelativeToContainingList threw an error', error.stack);
      }
    }
  }, {
    key: "_renderDebugOverlay",
    value: function _renderDebugOverlay() {
      var normalize = this._scrollMetrics.visibleLength / this._scrollMetrics.contentLength;
      var framesInLayout = [];
      var itemCount = this.props.getItemCount(this.props.data);

      for (var ii = 0; ii < itemCount; ii++) {
        var frame = this._getFrameMetricsApprox(ii);

        if (frame.inLayout) {
          framesInLayout.push(frame);
        }
      }

      var windowTop = this._getFrameMetricsApprox(this.state.first).offset;

      var frameLast = this._getFrameMetricsApprox(this.state.last);

      var windowLen = frameLast.offset + frameLast.length - windowTop;
      var visTop = this._scrollMetrics.offset;
      var visLen = this._scrollMetrics.visibleLength;
      var baseStyle = {
        position: 'absolute',
        top: 0,
        right: 0
      };
      return React.createElement(View, {
        style: (0, _objectSpread2.default)({}, baseStyle, {
          bottom: 0,
          width: 20,
          borderColor: 'blue',
          borderWidth: 1
        })
      }, framesInLayout.map(function (f, ii) {
        return React.createElement(View, {
          key: 'f' + ii,
          style: (0, _objectSpread2.default)({}, baseStyle, {
            left: 0,
            top: f.offset * normalize,
            height: f.length * normalize,
            backgroundColor: 'orange'
          })
        });
      }), React.createElement(View, {
        style: (0, _objectSpread2.default)({}, baseStyle, {
          left: 0,
          top: windowTop * normalize,
          height: windowLen * normalize,
          borderColor: 'green',
          borderWidth: 2
        })
      }), React.createElement(View, {
        style: (0, _objectSpread2.default)({}, baseStyle, {
          left: 0,
          top: visTop * normalize,
          height: visLen * normalize,
          borderColor: 'red',
          borderWidth: 2
        })
      }));
    }
  }, {
    key: "_selectLength",
    value: function _selectLength(metrics) {
      return !this.props.horizontal ? metrics.height : metrics.width;
    }
  }, {
    key: "_selectOffset",
    value: function _selectOffset(metrics) {
      return !this.props.horizontal ? metrics.y : metrics.x;
    }
  }, {
    key: "_maybeCallOnEndReached",
    value: function _maybeCallOnEndReached() {
      var _this$props10 = this.props,
          data = _this$props10.data,
          getItemCount = _this$props10.getItemCount,
          onEndReached = _this$props10.onEndReached,
          onEndReachedThreshold = _this$props10.onEndReachedThreshold;
      var _this$_scrollMetrics2 = this._scrollMetrics,
          contentLength = _this$_scrollMetrics2.contentLength,
          visibleLength = _this$_scrollMetrics2.visibleLength,
          offset = _this$_scrollMetrics2.offset;
      var distanceFromEnd = contentLength - visibleLength - offset;

      if (onEndReached && this.state.last === getItemCount(data) - 1 && distanceFromEnd < onEndReachedThreshold * visibleLength && (this._hasDataChangedSinceEndReached || this._scrollMetrics.contentLength !== this._sentEndForContentLength)) {
        this._hasDataChangedSinceEndReached = false;
        this._sentEndForContentLength = this._scrollMetrics.contentLength;
        onEndReached({
          distanceFromEnd: distanceFromEnd
        });
      }
    }
  }, {
    key: "_scheduleCellsToRenderUpdate",
    value: function _scheduleCellsToRenderUpdate() {
      var _this$state2 = this.state,
          first = _this$state2.first,
          last = _this$state2.last;
      var _this$_scrollMetrics3 = this._scrollMetrics,
          offset = _this$_scrollMetrics3.offset,
          visibleLength = _this$_scrollMetrics3.visibleLength,
          velocity = _this$_scrollMetrics3.velocity;
      var itemCount = this.props.getItemCount(this.props.data);
      var hiPri = false;
      var scrollingThreshold = this.props.onEndReachedThreshold * visibleLength / 2;

      if (first > 0) {
        var distTop = offset - this._getFrameMetricsApprox(first).offset;

        hiPri = hiPri || distTop < 0 || velocity < -2 && distTop < scrollingThreshold;
      }

      if (last < itemCount - 1) {
        var distBottom = this._getFrameMetricsApprox(last).offset - (offset + visibleLength);
        hiPri = hiPri || distBottom < 0 || velocity > 2 && distBottom < scrollingThreshold;
      }

      if (hiPri && this._averageCellLength) {
        this._updateCellsToRenderBatcher.dispose({
          abort: true
        });

        this._updateCellsToRender();

        return;
      } else {
        this._updateCellsToRenderBatcher.schedule();
      }
    }
  }, {
    key: "_updateViewableItems",
    value: function _updateViewableItems(data) {
      var _this5 = this;

      var getItemCount = this.props.getItemCount;

      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.onUpdate(getItemCount(data), _this5._scrollMetrics.offset, _this5._scrollMetrics.visibleLength, _this5._getFrameMetrics, _this5._createViewToken, tuple.onViewableItemsChanged, _this5.state);
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(newProps, prevState) {
      var data = newProps.data,
          extraData = newProps.extraData,
          getItemCount = newProps.getItemCount,
          maxToRenderPerBatch = newProps.maxToRenderPerBatch;
      return {
        first: Math.max(0, Math.min(prevState.first, getItemCount(data) - 1 - maxToRenderPerBatch)),
        last: Math.max(0, Math.min(prevState.last, getItemCount(data) - 1))
      };
    }
  }]);
  return VirtualizedList;
}(React.PureComponent);

(0, _defineProperty2.default)(VirtualizedList, "defaultProps", {
  disableVirtualization: false,
  horizontal: false,
  initialNumToRender: 10,
  keyExtractor: function keyExtractor(item, index) {
    if (item.key != null) {
      return item.key;
    }

    _usedIndexForKey = true;

    if (item.type && item.type.displayName) {
      _keylessItemComponentName = item.type.displayName;
    }

    return String(index);
  },
  maxToRenderPerBatch: 10,
  onEndReachedThreshold: 2,
  scrollEventThrottle: 50,
  updateCellsBatchingPeriod: 50,
  windowSize: 21
});
(0, _defineProperty2.default)(VirtualizedList, "contextTypes", {
  virtualizedCell: PropTypes.shape({
    cellKey: PropTypes.string
  }),
  virtualizedList: PropTypes.shape({
    getScrollMetrics: PropTypes.func,
    horizontal: PropTypes.bool,
    getOutermostParentListRef: PropTypes.func,
    getNestedChildState: PropTypes.func,
    registerAsNestedChild: PropTypes.func,
    unregisterAsNestedChild: PropTypes.func
  })
});
(0, _defineProperty2.default)(VirtualizedList, "childContextTypes", {
  virtualizedList: PropTypes.shape({
    getScrollMetrics: PropTypes.func,
    horizontal: PropTypes.bool,
    getOutermostParentListRef: PropTypes.func,
    getNestedChildState: PropTypes.func,
    registerAsNestedChild: PropTypes.func,
    unregisterAsNestedChild: PropTypes.func
  })
});

var CellRenderer = function (_React$Component) {
  (0, _inherits2.default)(CellRenderer, _React$Component);

  function CellRenderer() {
    var _getPrototypeOf2;

    var _this6;

    (0, _classCallCheck2.default)(this, CellRenderer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this6 = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(CellRenderer)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), "state", {
      separatorProps: {
        highlighted: false,
        leadingItem: _this6.props.item
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), "_separators", {
      highlight: function highlight() {
        var _this6$props = _this6.props,
            cellKey = _this6$props.cellKey,
            prevCellKey = _this6$props.prevCellKey;

        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: true
        });
      },
      unhighlight: function unhighlight() {
        var _this6$props2 = _this6.props,
            cellKey = _this6$props2.cellKey,
            prevCellKey = _this6$props2.prevCellKey;

        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: false
        });
      },
      updateProps: function updateProps(select, newProps) {
        var _this6$props3 = _this6.props,
            cellKey = _this6$props3.cellKey,
            prevCellKey = _this6$props3.prevCellKey;

        _this6.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);
      }
    });
    return _this6;
  }

  (0, _createClass2.default)(CellRenderer, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedCell: {
          cellKey: this.props.cellKey
        }
      };
    }
  }, {
    key: "updateSeparatorProps",
    value: function updateSeparatorProps(newProps) {
      this.setState(function (state) {
        return {
          separatorProps: (0, _objectSpread2.default)({}, state.separatorProps, newProps)
        };
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.props.onUnmount(this.props.cellKey);
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props11 = this.props,
          CellRendererComponent = _this$props11.CellRendererComponent,
          ItemSeparatorComponent = _this$props11.ItemSeparatorComponent,
          fillRateHelper = _this$props11.fillRateHelper,
          horizontal = _this$props11.horizontal,
          item = _this$props11.item,
          index = _this$props11.index,
          inversionStyle = _this$props11.inversionStyle,
          parentProps = _this$props11.parentProps;
      var renderItem = parentProps.renderItem,
          getItemLayout = parentProps.getItemLayout;
      invariant(renderItem, 'no renderItem!');
      var element = renderItem({
        item: item,
        index: index,
        separators: this._separators
      });
      var onLayout = getItemLayout && !parentProps.debug && !fillRateHelper.enabled() ? undefined : this.props.onLayout;
      var itemSeparator = ItemSeparatorComponent && React.createElement(ItemSeparatorComponent, this.state.separatorProps);
      var cellStyle = inversionStyle ? horizontal ? [{
        flexDirection: 'row-reverse'
      }, inversionStyle] : [{
        flexDirection: 'column-reverse'
      }, inversionStyle] : horizontal ? [{
        flexDirection: 'row'
      }, inversionStyle] : inversionStyle;

      if (!CellRendererComponent) {
        return React.createElement(View, {
          style: cellStyle,
          onLayout: onLayout
        }, element, itemSeparator);
      }

      return React.createElement(CellRendererComponent, (0, _extends2.default)({}, this.props, {
        style: cellStyle,
        onLayout: onLayout
      }), element, itemSeparator);
    }
  }]);
  return CellRenderer;
}(React.Component);

(0, _defineProperty2.default)(CellRenderer, "childContextTypes", {
  virtualizedCell: PropTypes.shape({
    cellKey: PropTypes.string
  })
});

var VirtualizedCellWrapper = function (_React$Component2) {
  (0, _inherits2.default)(VirtualizedCellWrapper, _React$Component2);

  function VirtualizedCellWrapper() {
    (0, _classCallCheck2.default)(this, VirtualizedCellWrapper);
    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf3.default)(VirtualizedCellWrapper).apply(this, arguments));
  }

  (0, _createClass2.default)(VirtualizedCellWrapper, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedCell: {
          cellKey: this.props.cellKey
        }
      };
    }
  }, {
    key: "render",
    value: function render() {
      return this.props.children;
    }
  }]);
  return VirtualizedCellWrapper;
}(React.Component);

(0, _defineProperty2.default)(VirtualizedCellWrapper, "childContextTypes", {
  virtualizedCell: PropTypes.shape({
    cellKey: PropTypes.string
  })
});
var styles = StyleSheet.create({
  verticallyInverted: {
    transform: [{
      scaleY: -1
    }]
  },
  horizontallyInverted: {
    transform: [{
      scaleX: -1
    }]
  }
});
module.exports = VirtualizedList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpcnR1YWxpemVkTGlzdC5qcyJdLCJuYW1lcyI6WyJCYXRjaGluYXRvciIsInJlcXVpcmUiLCJGaWxsUmF0ZUhlbHBlciIsIlByb3BUeXBlcyIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJSZWZyZXNoQ29udHJvbCIsIlNjcm9sbFZpZXciLCJTdHlsZVNoZWV0IiwiVUlNYW5hZ2VyIiwiVmlldyIsIlZpZXdhYmlsaXR5SGVscGVyIiwiZmxhdHRlblN0eWxlIiwiaW5mb0xvZyIsImludmFyaWFudCIsIndhcm5pbmciLCJjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHMiLCJfdXNlZEluZGV4Rm9yS2V5IiwiX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSIsIlZpcnR1YWxpemVkTGlzdCIsInBhcmFtcyIsImFuaW1hdGVkIiwidmVyeUxhc3QiLCJwcm9wcyIsImdldEl0ZW1Db3VudCIsImRhdGEiLCJmcmFtZSIsIl9nZXRGcmFtZU1ldHJpY3NBcHByb3giLCJvZmZzZXQiLCJNYXRoIiwibWF4IiwibGVuZ3RoIiwiX2Zvb3Rlckxlbmd0aCIsIl9zY3JvbGxNZXRyaWNzIiwidmlzaWJsZUxlbmd0aCIsIl9zY3JvbGxSZWYiLCJzY3JvbGxUbyIsImhvcml6b250YWwiLCJ4IiwieSIsImdldEl0ZW1MYXlvdXQiLCJvblNjcm9sbFRvSW5kZXhGYWlsZWQiLCJpbmRleCIsInZpZXdPZmZzZXQiLCJ2aWV3UG9zaXRpb24iLCJfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCIsImF2ZXJhZ2VJdGVtTGVuZ3RoIiwiX2F2ZXJhZ2VDZWxsTGVuZ3RoIiwiaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCIsIml0ZW0iLCJnZXRJdGVtIiwiaXRlbUNvdW50Iiwic2Nyb2xsVG9JbmRleCIsIl9uZXN0ZWRDaGlsZExpc3RzIiwiZm9yRWFjaCIsImNoaWxkTGlzdCIsInJlZiIsInJlY29yZEludGVyYWN0aW9uIiwiX3ZpZXdhYmlsaXR5VHVwbGVzIiwidCIsInZpZXdhYmlsaXR5SGVscGVyIiwiX3VwZGF0ZVZpZXdhYmxlSXRlbXMiLCJmbGFzaFNjcm9sbEluZGljYXRvcnMiLCJnZXRTY3JvbGxSZXNwb25kZXIiLCJnZXRTY3JvbGxhYmxlTm9kZSIsImZpbmROb2RlSGFuZGxlIiwic2V0TmF0aXZlUHJvcHMiLCJ2aXJ0dWFsaXplZExpc3QiLCJnZXRTY3JvbGxNZXRyaWNzIiwiX2dldFNjcm9sbE1ldHJpY3MiLCJnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmIiwiX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYiLCJnZXROZXN0ZWRDaGlsZFN0YXRlIiwiX2dldE5lc3RlZENoaWxkU3RhdGUiLCJyZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJfcmVnaXN0ZXJBc05lc3RlZENoaWxkIiwidW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJfdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJjb250ZXh0IiwidmlydHVhbGl6ZWRDZWxsIiwiY2VsbEtleSIsIl9oYXNNb3JlIiwiX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbiIsImtleSIsImV4aXN0aW5nQ2hpbGREYXRhIiwiZ2V0Iiwic3RhdGUiLCJjaGlsZExpc3RzSW5DZWxsIiwiX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzIiwiU2V0IiwiYWRkIiwic2V0IiwiX2hhc0ludGVyYWN0ZWQiLCJrZXlzIiwibmV3UHJvcHMiLCJfY2VsbFJlZnMiLCJ1cGRhdGVTZXBhcmF0b3JQcm9wcyIsIk1hcCIsImNvbnRlbnRMZW5ndGgiLCJkT2Zmc2V0IiwiZHQiLCJ0aW1lc3RhbXAiLCJ2ZWxvY2l0eSIsIm9uUmVmcmVzaCIsInJlZnJlc2hpbmciLCJKU09OIiwic3RyaW5naWZ5IiwicmVmcmVzaENvbnRyb2wiLCJwcm9ncmVzc1ZpZXdPZmZzZXQiLCJjdXJyIiwiX2ZyYW1lcyIsImluTGF5b3V0IiwiZSIsIm1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QiLCJfc2VsZWN0TGVuZ3RoIiwibmF0aXZlRXZlbnQiLCJsYXlvdXQiLCJvbkxheW91dCIsIl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUiLCJfbWF5YmVDYWxsT25FbmRSZWFjaGVkIiwiX2hlYWRlckxlbmd0aCIsIndpZHRoIiwiaGVpZ2h0IiwiaW5pdGlhbFNjcm9sbEluZGV4IiwiX2hhc0RvbmVJbml0aWFsU2Nyb2xsIiwib25Db250ZW50U2l6ZUNoYW5nZSIsIm1ldHJpY3MiLCJfb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdCIsIl9vblNjcm9sbCIsIm9uU2Nyb2xsIiwidGltZVN0YW1wIiwibGF5b3V0TWVhc3VyZW1lbnQiLCJjb250ZW50U2l6ZSIsIl9zZWxlY3RPZmZzZXQiLCJjb250ZW50T2Zmc2V0IiwiX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzIiwiX2hhc1dhcm5lZCIsInBlcmYiLCJwcmV2RHQiLCJfZmlsbFJhdGVIZWxwZXIiLCJhY3RpdmF0ZSIsIl9jb21wdXRlQmxhbmtuZXNzIiwiX29uU2Nyb2xsQmVnaW5EcmFnIiwidHVwbGUiLCJvblNjcm9sbEJlZ2luRHJhZyIsIm9uU2Nyb2xsRW5kRHJhZyIsIm9uTW9tZW50dW1TY3JvbGxFbmQiLCJvbkVuZFJlYWNoZWRUaHJlc2hvbGQiLCJpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQiLCJfaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkIiwic2V0U3RhdGUiLCJuZXdTdGF0ZSIsImRpc3RhbmNlRnJvbUVuZCIsInJlbmRlckFoZWFkIiwibWF4VG9SZW5kZXJQZXJCYXRjaCIsImZpcnN0IiwibGFzdCIsIm1pbiIsInNpemUiLCJuZXdGaXJzdCIsIm5ld0xhc3QiLCJpaSIsImNlbGxLZXlGb3JJbmRleCIsIl9pbmRpY2VzVG9LZXlzIiwiY2hpbGRMaXN0S2V5cyIsInNvbWVDaGlsZEhhc01vcmUiLCJjaGlsZEtleSIsImhhc01vcmUiLCJpc1ZpZXdhYmxlIiwia2V5RXh0cmFjdG9yIiwiX2dldEZyYW1lTWV0cmljcyIsIl9fREVWX18iLCJmcmFtZVR5cGUiLCJzaGFwZSIsIm51bWJlciIsImlzUmVxdWlyZWQiLCJjaGVja1Byb3BUeXBlcyIsIl9faXNOYXRpdmUiLCJ3aW5kb3dTaXplIiwiX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyIiwiX3VwZGF0ZUNlbGxzVG9SZW5kZXIiLCJ1cGRhdGVDZWxsc0JhdGNoaW5nUGVyaW9kIiwidmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIiwibWFwIiwicGFpciIsInZpZXdhYmlsaXR5Q29uZmlnIiwib25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCIsInB1c2giLCJpbml0aWFsU3RhdGUiLCJpbml0aWFsTnVtVG9SZW5kZXIiLCJzdG9yZWRTdGF0ZSIsImxpc3RLZXkiLCJfZ2V0Q2VsbEtleSIsImZyYW1lcyIsImRpc3Bvc2UiLCJhYm9ydCIsImRlYWN0aXZhdGVBbmRGbHVzaCIsImNlbGxzIiwic3RpY2t5SGVhZGVySW5kaWNlcyIsInN0aWNreUluZGljZXNGcm9tUHJvcHMiLCJpbnZlcnNpb25TdHlsZSIsIkNlbGxSZW5kZXJlckNvbXBvbmVudCIsIkl0ZW1TZXBhcmF0b3JDb21wb25lbnQiLCJzdGlja3lPZmZzZXQiLCJMaXN0SGVhZGVyQ29tcG9uZW50IiwiZW5kIiwicHJldkNlbGxLZXkiLCJoYXMiLCJ1bmRlZmluZWQiLCJfb25VcGRhdGVTZXBhcmF0b3JzIiwiX29uQ2VsbExheW91dCIsIl9vbkNlbGxVbm1vdW50IiwiZGlzYWJsZVZpcnR1YWxpemF0aW9uIiwibmVzdGVkQ29udGV4dCIsImZsYXRTdHlsZXMiLCJjb250ZW50Q29udGFpbmVyU3R5bGUiLCJmbGV4V3JhcCIsIkxpc3RFbXB0eUNvbXBvbmVudCIsIkxpc3RGb290ZXJDb21wb25lbnQiLCJpbnZlcnRlZCIsInN0eWxlcyIsImhvcml6b250YWxseUludmVydGVkIiwidmVydGljYWxseUludmVydGVkIiwiZWxlbWVudCIsImlzVmFsaWRFbGVtZW50IiwiX29uTGF5b3V0SGVhZGVyIiwiY29tcG9zZSIsIkxpc3RIZWFkZXJDb21wb25lbnRTdHlsZSIsInNwYWNlcktleSIsImxhc3RJbml0aWFsSW5kZXgiLCJfcHVzaENlbGxzIiwiZmlyc3RBZnRlckluaXRpYWwiLCJpbnNlcnRlZFN0aWNreVNwYWNlciIsImluaXRCbG9jayIsInN0aWNreUJsb2NrIiwibGVhZFNwYWNlIiwidHJhaWxTcGFjZSIsImZpcnN0U3BhY2UiLCJjb25zb2xlIiwid2FybiIsImxhc3RGcmFtZSIsImVuZEZyYW1lIiwidGFpbFNwYWNlckxlbmd0aCIsImNsb25lRWxlbWVudCIsImV2ZW50IiwiX29uTGF5b3V0RW1wdHkiLCJzdHlsZSIsIl9vbkxheW91dEZvb3RlciIsIkxpc3RGb290ZXJDb21wb25lbnRTdHlsZSIsInNjcm9sbFByb3BzIiwiX29uQ29udGVudFNpemVDaGFuZ2UiLCJfb25MYXlvdXQiLCJfb25TY3JvbGxFbmREcmFnIiwiX29uTW9tZW50dW1TY3JvbGxFbmQiLCJzY3JvbGxFdmVudFRocm90dGxlIiwiaW52ZXJ0U3RpY2t5SGVhZGVycyIsInJldCIsInJlbmRlclNjcm9sbENvbXBvbmVudCIsIl9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50IiwiX2NhcHR1cmVTY3JvbGxSZWYiLCJkZWJ1ZyIsImZsZXgiLCJfcmVuZGVyRGVidWdPdmVybGF5IiwicHJldlByb3BzIiwiZXh0cmFEYXRhIiwiX2hhc0RhdGFDaGFuZ2VkU2luY2VFbmRSZWFjaGVkIiwicmVzZXRWaWV3YWJsZUluZGljZXMiLCJjb21wdXRlQmxhbmtuZXNzIiwibmV4dCIsIl90b3RhbENlbGxMZW5ndGgiLCJfdG90YWxDZWxsc01lYXN1cmVkIiwibWVhc3VyZUxheW91dCIsImVycm9yIiwic2Nyb2xsTWV0cmljcyIsInN0YWNrIiwibm9ybWFsaXplIiwiZnJhbWVzSW5MYXlvdXQiLCJ3aW5kb3dUb3AiLCJmcmFtZUxhc3QiLCJ3aW5kb3dMZW4iLCJ2aXNUb3AiLCJ2aXNMZW4iLCJiYXNlU3R5bGUiLCJwb3NpdGlvbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImYiLCJsZWZ0IiwiYmFja2dyb3VuZENvbG9yIiwib25FbmRSZWFjaGVkIiwiX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoIiwiaGlQcmkiLCJzY3JvbGxpbmdUaHJlc2hvbGQiLCJkaXN0VG9wIiwiZGlzdEJvdHRvbSIsInNjaGVkdWxlIiwib25VcGRhdGUiLCJfY3JlYXRlVmlld1Rva2VuIiwicHJldlN0YXRlIiwiUHVyZUNvbXBvbmVudCIsInR5cGUiLCJkaXNwbGF5TmFtZSIsIlN0cmluZyIsInN0cmluZyIsImZ1bmMiLCJib29sIiwiQ2VsbFJlbmRlcmVyIiwic2VwYXJhdG9yUHJvcHMiLCJoaWdobGlnaHRlZCIsImxlYWRpbmdJdGVtIiwiaGlnaGxpZ2h0Iiwib25VcGRhdGVTZXBhcmF0b3JzIiwidW5oaWdobGlnaHQiLCJ1cGRhdGVQcm9wcyIsInNlbGVjdCIsIm9uVW5tb3VudCIsImZpbGxSYXRlSGVscGVyIiwicGFyZW50UHJvcHMiLCJyZW5kZXJJdGVtIiwic2VwYXJhdG9ycyIsIl9zZXBhcmF0b3JzIiwiZW5hYmxlZCIsIml0ZW1TZXBhcmF0b3IiLCJjZWxsU3R5bGUiLCJmbGV4RGlyZWN0aW9uIiwiQ29tcG9uZW50IiwiVmlydHVhbGl6ZWRDZWxsV3JhcHBlciIsImNoaWxkcmVuIiwiY3JlYXRlIiwidHJhbnNmb3JtIiwic2NhbGVZIiwic2NhbGVYIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQTNCOztBQUNBLElBQU1DLGNBQWMsR0FBR0QsT0FBTyxDQUFDLGdCQUFELENBQTlCOztBQUNBLElBQU1FLFNBQVMsR0FBR0YsT0FBTyxDQUFDLFlBQUQsQ0FBekI7O0FBQ0EsSUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxJQUFNSSxXQUFXLEdBQUdKLE9BQU8sQ0FBQyxhQUFELENBQTNCOztBQUNBLElBQU1LLGNBQWMsR0FBR0wsT0FBTyxDQUFDLGdCQUFE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N1QsZUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQmF0Y2hpbmF0b3IgPSByZXF1aXJlKCdCYXRjaGluYXRvcicpO1xuY29uc3QgRmlsbFJhdGVIZWxwZXIgPSByZXF1aXJlKCdGaWxsUmF0ZUhlbHBlcicpO1xuY29uc3QgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdSZWFjdCcpO1xuY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlKCdSZWFjdE5hdGl2ZScpO1xuY29uc3QgUmVmcmVzaENvbnRyb2wgPSByZXF1aXJlKCdSZWZyZXNoQ29udHJvbCcpO1xuY29uc3QgU2Nyb2xsVmlldyA9IHJlcXVpcmUoJ1Njcm9sbFZpZXcnKTtcbmNvbnN0IFN0eWxlU2hlZXQgPSByZXF1aXJlKCdTdHlsZVNoZWV0Jyk7XG5jb25zdCBVSU1hbmFnZXIgPSByZXF1aXJlKCdVSU1hbmFnZXInKTtcbmNvbnN0IFZpZXcgPSByZXF1aXJlKCdWaWV3Jyk7XG5jb25zdCBWaWV3YWJpbGl0eUhlbHBlciA9IHJlcXVpcmUoJ1ZpZXdhYmlsaXR5SGVscGVyJyk7XG5cbmNvbnN0IGZsYXR0ZW5TdHlsZSA9IHJlcXVpcmUoJ2ZsYXR0ZW5TdHlsZScpO1xuY29uc3QgaW5mb0xvZyA9IHJlcXVpcmUoJ2luZm9Mb2cnKTtcbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuLyogJEZsb3dGaXhNZSg+PTAuNTQuMCBzaXRlPXJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuIGVycm9yXG4gKiBmb3VuZCB3aGVuIEZsb3cgdjAuNTQgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kXG4gKiBydW4gRmxvdy4gKi9cbmNvbnN0IHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmNvbnN0IHtjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHN9ID0gcmVxdWlyZSgnVmlydHVhbGl6ZVV0aWxzJyk7XG5cbmltcG9ydCB0eXBlIHtEYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcCwgVmlld1N0eWxlUHJvcH0gZnJvbSAnU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7XG4gIFZpZXdhYmlsaXR5Q29uZmlnLFxuICBWaWV3VG9rZW4sXG4gIFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyLFxufSBmcm9tICdWaWV3YWJpbGl0eUhlbHBlcic7XG5cbnR5cGUgSXRlbSA9IGFueTtcblxuZXhwb3J0IHR5cGUgcmVuZGVySXRlbVR5cGUgPSAoaW5mbzogYW55KSA9PiA/UmVhY3QuRWxlbWVudDxhbnk+O1xuXG50eXBlIFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZSA9IHtcbiAgdmlld2FiaWxpdHlIZWxwZXI6IFZpZXdhYmlsaXR5SGVscGVyLFxuICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiAoaW5mbzoge1xuICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgfSkgPT4gdm9pZCxcbn07XG5cbnR5cGUgUmVxdWlyZWRQcm9wcyA9IHtcbiAgLy8gVE9ETzogQ29uZmxpY3RzIHdpdGggdGhlIG9wdGlvbmFsIGByZW5kZXJJdGVtYCBpblxuICAvLyBgVmlydHVhbGl6ZWRTZWN0aW9uTGlzdGAncyBwcm9wcy5cbiAgcmVuZGVySXRlbTogJEZsb3dGaXhNZTxyZW5kZXJJdGVtVHlwZT4sXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhY2Nlc3NvciBmdW5jdGlvbnMgYXNzdW1lIHRoaXMgaXMgYW4gQXJyYXk8e2tleTogc3RyaW5nfT4gYnV0IHlvdSBjYW4gb3ZlcnJpZGVcbiAgICogZ2V0SXRlbSwgZ2V0SXRlbUNvdW50LCBhbmQga2V5RXh0cmFjdG9yIHRvIGhhbmRsZSBhbnkgdHlwZSBvZiBpbmRleC1iYXNlZCBkYXRhLlxuICAgKi9cbiAgZGF0YT86IGFueSxcbiAgLyoqXG4gICAqIEEgZ2VuZXJpYyBhY2Nlc3NvciBmb3IgZXh0cmFjdGluZyBhbiBpdGVtIGZyb20gYW55IHNvcnQgb2YgZGF0YSBibG9iLlxuICAgKi9cbiAgZ2V0SXRlbTogKGRhdGE6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gP0l0ZW0sXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGhvdyBtYW55IGl0ZW1zIGFyZSBpbiB0aGUgZGF0YSBibG9iLlxuICAgKi9cbiAgZ2V0SXRlbUNvdW50OiAoZGF0YTogYW55KSA9PiBudW1iZXIsXG59O1xudHlwZSBPcHRpb25hbFByb3BzID0ge1xuICAvKipcbiAgICogYGRlYnVnYCB3aWxsIHR1cm4gb24gZXh0cmEgbG9nZ2luZyBhbmQgdmlzdWFsIG92ZXJsYXlzIHRvIGFpZCB3aXRoIGRlYnVnZ2luZyBib3RoIHVzYWdlIGFuZFxuICAgKiBpbXBsZW1lbnRhdGlvbiwgYnV0IHdpdGggYSBzaWduaWZpY2FudCBwZXJmIGhpdC5cbiAgICovXG4gIGRlYnVnPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBERVBSRUNBVEVEOiBWaXJ0dWFsaXphdGlvbiBwcm92aWRlcyBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBhbmQgbWVtb3J5IG9wdGltaXphdGlvbnMsIGJ1dCBmdWxseVxuICAgKiB1bm1vdW50cyByZWFjdCBpbnN0YW5jZXMgdGhhdCBhcmUgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gWW91IHNob3VsZCBvbmx5IG5lZWQgdG8gZGlzYWJsZVxuICAgKiB0aGlzIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gICAqL1xuICBkaXNhYmxlVmlydHVhbGl6YXRpb246IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBBIG1hcmtlciBwcm9wZXJ0eSBmb3IgdGVsbGluZyB0aGUgbGlzdCB0byByZS1yZW5kZXIgKHNpbmNlIGl0IGltcGxlbWVudHMgYFB1cmVDb21wb25lbnRgKS4gSWZcbiAgICogYW55IG9mIHlvdXIgYHJlbmRlckl0ZW1gLCBIZWFkZXIsIEZvb3RlciwgZXRjLiBmdW5jdGlvbnMgZGVwZW5kIG9uIGFueXRoaW5nIG91dHNpZGUgb2YgdGhlXG4gICAqIGBkYXRhYCBwcm9wLCBzdGljayBpdCBoZXJlIGFuZCB0cmVhdCBpdCBpbW11dGFibHkuXG4gICAqL1xuICBleHRyYURhdGE/OiBhbnksXG4gIGdldEl0ZW1MYXlvdXQ/OiAoXG4gICAgZGF0YTogYW55LFxuICAgIGluZGV4OiBudW1iZXIsXG4gICkgPT4ge2xlbmd0aDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlciwgaW5kZXg6IG51bWJlcn0sIC8vIGUuZy4gaGVpZ2h0LCB5XG4gIGhvcml6b250YWw/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIEhvdyBtYW55IGl0ZW1zIHRvIHJlbmRlciBpbiB0aGUgaW5pdGlhbCBiYXRjaC4gVGhpcyBzaG91bGQgYmUgZW5vdWdoIHRvIGZpbGwgdGhlIHNjcmVlbiBidXQgbm90XG4gICAqIG11Y2ggbW9yZS4gTm90ZSB0aGVzZSBpdGVtcyB3aWxsIG5ldmVyIGJlIHVubW91bnRlZCBhcyBwYXJ0IG9mIHRoZSB3aW5kb3dlZCByZW5kZXJpbmcgaW4gb3JkZXJcbiAgICogdG8gaW1wcm92ZSBwZXJjZWl2ZWQgcGVyZm9ybWFuY2Ugb2Ygc2Nyb2xsLXRvLXRvcCBhY3Rpb25zLlxuICAgKi9cbiAgaW5pdGlhbE51bVRvUmVuZGVyOiBudW1iZXIsXG4gIC8qKlxuICAgKiBJbnN0ZWFkIG9mIHN0YXJ0aW5nIGF0IHRoZSB0b3Agd2l0aCB0aGUgZmlyc3QgaXRlbSwgc3RhcnQgYXQgYGluaXRpYWxTY3JvbGxJbmRleGAuIFRoaXNcbiAgICogZGlzYWJsZXMgdGhlIFwic2Nyb2xsIHRvIHRvcFwiIG9wdGltaXphdGlvbiB0aGF0IGtlZXBzIHRoZSBmaXJzdCBgaW5pdGlhbE51bVRvUmVuZGVyYCBpdGVtc1xuICAgKiBhbHdheXMgcmVuZGVyZWQgYW5kIGltbWVkaWF0ZWx5IHJlbmRlcnMgdGhlIGl0ZW1zIHN0YXJ0aW5nIGF0IHRoaXMgaW5pdGlhbCBpbmRleC4gUmVxdWlyZXNcbiAgICogYGdldEl0ZW1MYXlvdXRgIHRvIGJlIGltcGxlbWVudGVkLlxuICAgKi9cbiAgaW5pdGlhbFNjcm9sbEluZGV4PzogP251bWJlcixcbiAgLyoqXG4gICAqIFJldmVyc2VzIHRoZSBkaXJlY3Rpb24gb2Ygc2Nyb2xsLiBVc2VzIHNjYWxlIHRyYW5zZm9ybXMgb2YgLTEuXG4gICAqL1xuICBpbnZlcnRlZD86ID9ib29sZWFuLFxuICBrZXlFeHRyYWN0b3I6IChpdGVtOiBJdGVtLCBpbmRleDogbnVtYmVyKSA9PiBzdHJpbmcsXG4gIC8qKlxuICAgKiBFYWNoIGNlbGwgaXMgcmVuZGVyZWQgdXNpbmcgdGhpcyBlbGVtZW50LiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsXG4gICAqIG9yIGEgcmVuZGVyIGZ1bmN0aW9uLiBEZWZhdWx0cyB0byB1c2luZyBWaWV3LlxuICAgKi9cbiAgQ2VsbFJlbmRlcmVyQ29tcG9uZW50PzogP1JlYWN0LkNvbXBvbmVudFR5cGU8YW55PixcbiAgLyoqXG4gICAqIFJlbmRlcmVkIHdoZW4gdGhlIGxpc3QgaXMgZW1wdHkuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RFbXB0eUNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgLyoqXG4gICAqIFJlbmRlcmVkIGF0IHRoZSBib3R0b20gb2YgYWxsIHRoZSBpdGVtcy4gQ2FuIGJlIGEgUmVhY3QgQ29tcG9uZW50IENsYXNzLCBhIHJlbmRlciBmdW5jdGlvbiwgb3JcbiAgICogYSByZW5kZXJlZCBlbGVtZW50LlxuICAgKi9cbiAgTGlzdEZvb3RlckNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgLyoqXG4gICAqIFN0eWxpbmcgZm9yIGludGVybmFsIFZpZXcgZm9yIExpc3RGb290ZXJDb21wb25lbnRcbiAgICovXG4gIExpc3RGb290ZXJDb21wb25lbnRTdHlsZT86IFZpZXdTdHlsZVByb3AsXG4gIC8qKlxuICAgKiBSZW5kZXJlZCBhdCB0aGUgdG9wIG9mIGFsbCB0aGUgaXRlbXMuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RIZWFkZXJDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBTdHlsaW5nIGZvciBpbnRlcm5hbCBWaWV3IGZvciBMaXN0SGVhZGVyQ29tcG9uZW50XG4gICAqL1xuICBMaXN0SGVhZGVyQ29tcG9uZW50U3R5bGU/OiBWaWV3U3R5bGVQcm9wLFxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBsaXN0LiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgVmlydHVhbGl6ZWRMaXN0cyBhdCB0aGUgc2FtZSBsZXZlbCBvZlxuICAgKiBuZXN0aW5nIHdpdGhpbiBhbm90aGVyIFZpcnR1YWxpemVkTGlzdCwgdGhpcyBrZXkgaXMgbmVjZXNzYXJ5IGZvciB2aXJ0dWFsaXphdGlvbiB0b1xuICAgKiB3b3JrIHByb3Blcmx5LlxuICAgKi9cbiAgbGlzdEtleT86IHN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZW5kZXIgaW4gZWFjaCBpbmNyZW1lbnRhbCByZW5kZXIgYmF0Y2guIFRoZSBtb3JlIHJlbmRlcmVkIGF0XG4gICAqIG9uY2UsIHRoZSBiZXR0ZXIgdGhlIGZpbGwgcmF0ZSwgYnV0IHJlc3BvbnNpdmVuZXNzIG15IHN1ZmZlciBiZWNhdXNlIHJlbmRlcmluZyBjb250ZW50IG1heVxuICAgKiBpbnRlcmZlcmUgd2l0aCByZXNwb25kaW5nIHRvIGJ1dHRvbiB0YXBzIG9yIG90aGVyIGludGVyYWN0aW9ucy5cbiAgICovXG4gIG1heFRvUmVuZGVyUGVyQmF0Y2g6IG51bWJlcixcbiAgb25FbmRSZWFjaGVkPzogPyhpbmZvOiB7ZGlzdGFuY2VGcm9tRW5kOiBudW1iZXJ9KSA9PiB2b2lkLFxuICBvbkVuZFJlYWNoZWRUaHJlc2hvbGQ/OiA/bnVtYmVyLCAvLyB1bml0cyBvZiB2aXNpYmxlIGxlbmd0aFxuICBvbkxheW91dD86ID9GdW5jdGlvbixcbiAgLyoqXG4gICAqIElmIHByb3ZpZGVkLCBhIHN0YW5kYXJkIFJlZnJlc2hDb250cm9sIHdpbGwgYmUgYWRkZWQgZm9yIFwiUHVsbCB0byBSZWZyZXNoXCIgZnVuY3Rpb25hbGl0eS4gTWFrZVxuICAgKiBzdXJlIHRvIGFsc28gc2V0IHRoZSBgcmVmcmVzaGluZ2AgcHJvcCBjb3JyZWN0bHkuXG4gICAqL1xuICBvblJlZnJlc2g/OiA/RnVuY3Rpb24sXG4gIC8qKlxuICAgKiBVc2VkIHRvIGhhbmRsZSBmYWlsdXJlcyB3aGVuIHNjcm9sbGluZyB0byBhbiBpbmRleCB0aGF0IGhhcyBub3QgYmVlbiBtZWFzdXJlZCB5ZXQuIFJlY29tbWVuZGVkXG4gICAqIGFjdGlvbiBpcyB0byBlaXRoZXIgY29tcHV0ZSB5b3VyIG93biBvZmZzZXQgYW5kIGBzY3JvbGxUb2AgaXQsIG9yIHNjcm9sbCBhcyBmYXIgYXMgcG9zc2libGUgYW5kXG4gICAqIHRoZW4gdHJ5IGFnYWluIGFmdGVyIG1vcmUgaXRlbXMgaGF2ZSBiZWVuIHJlbmRlcmVkLlxuICAgKi9cbiAgb25TY3JvbGxUb0luZGV4RmFpbGVkPzogPyhpbmZvOiB7XG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBoaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4OiBudW1iZXIsXG4gICAgYXZlcmFnZUl0ZW1MZW5ndGg6IG51bWJlcixcbiAgfSkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3YWJpbGl0eSBvZiByb3dzIGNoYW5nZXMsIGFzIGRlZmluZWQgYnkgdGhlXG4gICAqIGB2aWV3YWJpbGl0eUNvbmZpZ2AgcHJvcC5cbiAgICovXG4gIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ/OiA/KGluZm86IHtcbiAgICB2aWV3YWJsZUl0ZW1zOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIGNoYW5nZWQ6IEFycmF5PFZpZXdUb2tlbj4sXG4gIH0pID0+IHZvaWQsXG4gIC8qKlxuICAgKiBTZXQgdGhpcyB3aGVuIG9mZnNldCBpcyBuZWVkZWQgZm9yIHRoZSBsb2FkaW5nIGluZGljYXRvciB0byBzaG93IGNvcnJlY3RseS5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHByb2dyZXNzVmlld09mZnNldD86IG51bWJlcixcbiAgLyoqXG4gICAqIEEgY3VzdG9tIHJlZnJlc2ggY29udHJvbCBlbGVtZW50LiBXaGVuIHNldCwgaXQgb3ZlcnJpZGVzIHRoZSBkZWZhdWx0XG4gICAqIDxSZWZyZXNoQ29udHJvbD4gY29tcG9uZW50IGJ1aWx0IGludGVybmFsbHkuIFRoZSBvblJlZnJlc2ggYW5kIHJlZnJlc2hpbmdcbiAgICogcHJvcHMgYXJlIGFsc28gaWdub3JlZC4gT25seSB3b3JrcyBmb3IgdmVydGljYWwgVmlydHVhbGl6ZWRMaXN0LlxuICAgKi9cbiAgcmVmcmVzaENvbnRyb2w/OiA/UmVhY3QuRWxlbWVudDxhbnk+LFxuICAvKipcbiAgICogU2V0IHRoaXMgdHJ1ZSB3aGlsZSB3YWl0aW5nIGZvciBuZXcgZGF0YSBmcm9tIGEgcmVmcmVzaC5cbiAgICovXG4gIHJlZnJlc2hpbmc/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIE5vdGU6IG1heSBoYXZlIGJ1Z3MgKG1pc3NpbmcgY29udGVudCkgaW4gc29tZSBjaXJjdW1zdGFuY2VzIC0gdXNlIGF0IHlvdXIgb3duIHJpc2suXG4gICAqXG4gICAqIFRoaXMgbWF5IGltcHJvdmUgc2Nyb2xsIHBlcmZvcm1hbmNlIGZvciBsYXJnZSBsaXN0cy5cbiAgICovXG4gIHJlbW92ZUNsaXBwZWRTdWJ2aWV3cz86IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBjdXN0b20gc2Nyb2xsIGNvbXBvbmVudCwgZS5nLiB3aXRoIGEgZGlmZmVyZW50bHkgc3R5bGVkIGBSZWZyZXNoQ29udHJvbGAuXG4gICAqL1xuICByZW5kZXJTY3JvbGxDb21wb25lbnQ/OiAocHJvcHM6IE9iamVjdCkgPT4gUmVhY3QuRWxlbWVudDxhbnk+LFxuICAvKipcbiAgICogQW1vdW50IG9mIHRpbWUgYmV0d2VlbiBsb3ctcHJpIGl0ZW0gcmVuZGVyIGJhdGNoZXMsIGUuZy4gZm9yIHJlbmRlcmluZyBpdGVtcyBxdWl0ZSBhIHdheXMgb2ZmXG4gICAqIHNjcmVlbi4gU2ltaWxhciBmaWxsIHJhdGUvcmVzcG9uc2l2ZW5lc3MgdHJhZGVvZmYgYXMgYG1heFRvUmVuZGVyUGVyQmF0Y2hgLlxuICAgKi9cbiAgdXBkYXRlQ2VsbHNCYXRjaGluZ1BlcmlvZDogbnVtYmVyLFxuICB2aWV3YWJpbGl0eUNvbmZpZz86IFZpZXdhYmlsaXR5Q29uZmlnLFxuICAvKipcbiAgICogTGlzdCBvZiBWaWV3YWJpbGl0eUNvbmZpZy9vblZpZXdhYmxlSXRlbXNDaGFuZ2VkIHBhaXJzLiBBIHNwZWNpZmljIG9uVmlld2FibGVJdGVtc0NoYW5nZWRcbiAgICogd2lsbCBiZSBjYWxsZWQgd2hlbiBpdHMgY29ycmVzcG9uZGluZyBWaWV3YWJpbGl0eUNvbmZpZydzIGNvbmRpdGlvbnMgYXJlIG1ldC5cbiAgICovXG4gIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycz86IEFycmF5PFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyPixcbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIHZpc2libGUgYXJlYSwgaW4gdW5pdHMgb2ZcbiAgICogdmlzaWJsZSBsZW5ndGhzLiBTbyBpZiB5b3VyIGxpc3QgZmlsbHMgdGhlIHNjcmVlbiwgdGhlbiBgd2luZG93U2l6ZT17MjF9YCAodGhlIGRlZmF1bHQpIHdpbGxcbiAgICogcmVuZGVyIHRoZSB2aXNpYmxlIHNjcmVlbiBhcmVhIHBsdXMgdXAgdG8gMTAgc2NyZWVucyBhYm92ZSBhbmQgMTAgYmVsb3cgdGhlIHZpZXdwb3J0LiBSZWR1Y2luZ1xuICAgKiB0aGlzIG51bWJlciB3aWxsIHJlZHVjZSBtZW1vcnkgY29uc3VtcHRpb24gYW5kIG1heSBpbXByb3ZlIHBlcmZvcm1hbmNlLCBidXQgd2lsbCBpbmNyZWFzZSB0aGVcbiAgICogY2hhbmNlIHRoYXQgZmFzdCBzY3JvbGxpbmcgbWF5IHJldmVhbCBtb21lbnRhcnkgYmxhbmsgYXJlYXMgb2YgdW5yZW5kZXJlZCBjb250ZW50LlxuICAgKi9cbiAgd2luZG93U2l6ZTogbnVtYmVyLFxufTtcbi8qICRGbG93Rml4TWUgLSB0aGlzIFByb3BzIHNlZW1zIHRvIGJlIG1pc3NpbmcgYSBidW5jaCBvZiBzdHVmZi4gUmVtb3ZlIHRoaXNcbiAqIGNvbW1lbnQgdG8gc2VlIHRoZSBlcnJvcnMgKi9cbmV4cG9ydCB0eXBlIFByb3BzID0gUmVxdWlyZWRQcm9wcyAmIE9wdGlvbmFsUHJvcHM7XG5cbmxldCBfdXNlZEluZGV4Rm9yS2V5ID0gZmFsc2U7XG5sZXQgX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZTogc3RyaW5nID0gJyc7XG5cbnR5cGUgRnJhbWUgPSB7XG4gIG9mZnNldDogbnVtYmVyLFxuICBsZW5ndGg6IG51bWJlcixcbiAgaW5kZXg6IG51bWJlcixcbiAgaW5MYXlvdXQ6IGJvb2xlYW4sXG59O1xuXG50eXBlIENoaWxkTGlzdFN0YXRlID0ge1xuICBmaXJzdDogbnVtYmVyLFxuICBsYXN0OiBudW1iZXIsXG4gIGZyYW1lczoge1trZXk6IG51bWJlcl06IEZyYW1lfSxcbn07XG5cbnR5cGUgU3RhdGUgPSB7Zmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyfTtcblxuLyoqXG4gKiBCYXNlIGltcGxlbWVudGF0aW9uIGZvciB0aGUgbW9yZSBjb252ZW5pZW50IFtgPEZsYXRMaXN0PmBdKC9yZWFjdC1uYXRpdmUvZG9jcy9mbGF0bGlzdC5odG1sKVxuICogYW5kIFtgPFNlY3Rpb25MaXN0PmBdKC9yZWFjdC1uYXRpdmUvZG9jcy9zZWN0aW9ubGlzdC5odG1sKSBjb21wb25lbnRzLCB3aGljaCBhcmUgYWxzbyBiZXR0ZXJcbiAqIGRvY3VtZW50ZWQuIEluIGdlbmVyYWwsIHRoaXMgc2hvdWxkIG9ubHkgcmVhbGx5IGJlIHVzZWQgaWYgeW91IG5lZWQgbW9yZSBmbGV4aWJpbGl0eSB0aGFuXG4gKiBgRmxhdExpc3RgIHByb3ZpZGVzLCBlLmcuIGZvciB1c2Ugd2l0aCBpbW11dGFibGUgZGF0YSBpbnN0ZWFkIG9mIHBsYWluIGFycmF5cy5cbiAqXG4gKiBWaXJ0dWFsaXphdGlvbiBtYXNzaXZlbHkgaW1wcm92ZXMgbWVtb3J5IGNvbnN1bXB0aW9uIGFuZCBwZXJmb3JtYW5jZSBvZiBsYXJnZSBsaXN0cyBieVxuICogbWFpbnRhaW5pbmcgYSBmaW5pdGUgcmVuZGVyIHdpbmRvdyBvZiBhY3RpdmUgaXRlbXMgYW5kIHJlcGxhY2luZyBhbGwgaXRlbXMgb3V0c2lkZSBvZiB0aGUgcmVuZGVyXG4gKiB3aW5kb3cgd2l0aCBhcHByb3ByaWF0ZWx5IHNpemVkIGJsYW5rIHNwYWNlLiBUaGUgd2luZG93IGFkYXB0cyB0byBzY3JvbGxpbmcgYmVoYXZpb3IsIGFuZCBpdGVtc1xuICogYXJlIHJlbmRlcmVkIGluY3JlbWVudGFsbHkgd2l0aCBsb3ctcHJpIChhZnRlciBhbnkgcnVubmluZyBpbnRlcmFjdGlvbnMpIGlmIHRoZXkgYXJlIGZhciBmcm9tIHRoZVxuICogdmlzaWJsZSBhcmVhLCBvciB3aXRoIGhpLXByaSBvdGhlcndpc2UgdG8gbWluaW1pemUgdGhlIHBvdGVudGlhbCBvZiBzZWVpbmcgYmxhbmsgc3BhY2UuXG4gKlxuICogU29tZSBjYXZlYXRzOlxuICpcbiAqIC0gSW50ZXJuYWwgc3RhdGUgaXMgbm90IHByZXNlcnZlZCB3aGVuIGNvbnRlbnQgc2Nyb2xscyBvdXQgb2YgdGhlIHJlbmRlciB3aW5kb3cuIE1ha2Ugc3VyZSBhbGxcbiAqICAgeW91ciBkYXRhIGlzIGNhcHR1cmVkIGluIHRoZSBpdGVtIGRhdGEgb3IgZXh0ZXJuYWwgc3RvcmVzIGxpa2UgRmx1eCwgUmVkdXgsIG9yIFJlbGF5LlxuICogLSBUaGlzIGlzIGEgYFB1cmVDb21wb25lbnRgIHdoaWNoIG1lYW5zIHRoYXQgaXQgd2lsbCBub3QgcmUtcmVuZGVyIGlmIGBwcm9wc2AgcmVtYWluIHNoYWxsb3ctXG4gKiAgIGVxdWFsLiBNYWtlIHN1cmUgdGhhdCBldmVyeXRoaW5nIHlvdXIgYHJlbmRlckl0ZW1gIGZ1bmN0aW9uIGRlcGVuZHMgb24gaXMgcGFzc2VkIGFzIGEgcHJvcFxuICogICAoZS5nLiBgZXh0cmFEYXRhYCkgdGhhdCBpcyBub3QgYD09PWAgYWZ0ZXIgdXBkYXRlcywgb3RoZXJ3aXNlIHlvdXIgVUkgbWF5IG5vdCB1cGRhdGUgb25cbiAqICAgY2hhbmdlcy4gVGhpcyBpbmNsdWRlcyB0aGUgYGRhdGFgIHByb3AgYW5kIHBhcmVudCBjb21wb25lbnQgc3RhdGUuXG4gKiAtIEluIG9yZGVyIHRvIGNvbnN0cmFpbiBtZW1vcnkgYW5kIGVuYWJsZSBzbW9vdGggc2Nyb2xsaW5nLCBjb250ZW50IGlzIHJlbmRlcmVkIGFzeW5jaHJvbm91c2x5XG4gKiAgIG9mZnNjcmVlbi4gVGhpcyBtZWFucyBpdCdzIHBvc3NpYmxlIHRvIHNjcm9sbCBmYXN0ZXIgdGhhbiB0aGUgZmlsbCByYXRlIGFuZHMgbW9tZW50YXJpbHkgc2VlXG4gKiAgIGJsYW5rIGNvbnRlbnQuIFRoaXMgaXMgYSB0cmFkZW9mZiB0aGF0IGNhbiBiZSBhZGp1c3RlZCB0byBzdWl0IHRoZSBuZWVkcyBvZiBlYWNoIGFwcGxpY2F0aW9uLFxuICogICBhbmQgd2UgYXJlIHdvcmtpbmcgb24gaW1wcm92aW5nIGl0IGJlaGluZCB0aGUgc2NlbmVzLlxuICogLSBCeSBkZWZhdWx0LCB0aGUgbGlzdCBsb29rcyBmb3IgYSBga2V5YCBwcm9wIG9uIGVhY2ggaXRlbSBhbmQgdXNlcyB0aGF0IGZvciB0aGUgUmVhY3Qga2V5LlxuICogICBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHByb3ZpZGUgYSBjdXN0b20gYGtleUV4dHJhY3RvcmAgcHJvcC5cbiAqXG4gKi9cbmNsYXNzIFZpcnR1YWxpemVkTGlzdCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHByb3BzOiBQcm9wcztcblxuICAvLyBzY3JvbGxUb0VuZCBtYXkgYmUgamFua3kgd2l0aG91dCBnZXRJdGVtTGF5b3V0IHByb3BcbiAgc2Nyb2xsVG9FbmQocGFyYW1zPzogP3thbmltYXRlZD86ID9ib29sZWFufSkge1xuICAgIGNvbnN0IGFuaW1hdGVkID0gcGFyYW1zID8gcGFyYW1zLmFuaW1hdGVkIDogdHJ1ZTtcbiAgICBjb25zdCB2ZXJ5TGFzdCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSkgLSAxO1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHZlcnlMYXN0KTtcbiAgICBjb25zdCBvZmZzZXQgPSBNYXRoLm1heChcbiAgICAgIDAsXG4gICAgICBmcmFtZS5vZmZzZXQgK1xuICAgICAgICBmcmFtZS5sZW5ndGggK1xuICAgICAgICB0aGlzLl9mb290ZXJMZW5ndGggLVxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgsXG4gICAgKTtcbiAgICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudFxuICAgICAqIHN1cHByZXNzZXMgYW4gZXJyb3Igd2hlbiB1cGdyYWRpbmcgRmxvdydzIHN1cHBvcnQgZm9yIFJlYWN0LiBUbyBzZWUgdGhlXG4gICAgICogZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuNTMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYixyZWFjdF9uYXRpdmVfb3NzKSBUaGlzXG4gICAgICAgKiBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3Igd2hlbiB1cGdyYWRpbmcgRmxvdydzIHN1cHBvcnQgZm9yIFJlYWN0LlxuICAgICAgICogVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIHRoaXMucHJvcHMuaG9yaXpvbnRhbCA/IHt4OiBvZmZzZXQsIGFuaW1hdGVkfSA6IHt5OiBvZmZzZXQsIGFuaW1hdGVkfSxcbiAgICApO1xuICB9XG5cbiAgLy8gc2Nyb2xsVG9JbmRleCBtYXkgYmUgamFua3kgd2l0aG91dCBnZXRJdGVtTGF5b3V0IHByb3BcbiAgc2Nyb2xsVG9JbmRleChwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdmlld09mZnNldD86IG51bWJlcixcbiAgICB2aWV3UG9zaXRpb24/OiBudW1iZXIsXG4gIH0pIHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgaG9yaXpvbnRhbCxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIGdldEl0ZW1MYXlvdXQsXG4gICAgICBvblNjcm9sbFRvSW5kZXhGYWlsZWQsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge2FuaW1hdGVkLCBpbmRleCwgdmlld09mZnNldCwgdmlld1Bvc2l0aW9ufSA9IHBhcmFtcztcbiAgICBpbnZhcmlhbnQoXG4gICAgICBpbmRleCA+PSAwICYmIGluZGV4IDwgZ2V0SXRlbUNvdW50KGRhdGEpLFxuICAgICAgYHNjcm9sbFRvSW5kZXggb3V0IG9mIHJhbmdlOiAke2luZGV4fSB2cyAke2dldEl0ZW1Db3VudChkYXRhKSAtIDF9YCxcbiAgICApO1xuICAgIGlmICghZ2V0SXRlbUxheW91dCAmJiBpbmRleCA+IHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXgpIHtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgISFvblNjcm9sbFRvSW5kZXhGYWlsZWQsXG4gICAgICAgICdzY3JvbGxUb0luZGV4IHNob3VsZCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggZ2V0SXRlbUxheW91dCBvciBvblNjcm9sbFRvSW5kZXhGYWlsZWQsICcgK1xuICAgICAgICAgICdvdGhlcndpc2UgdGhlcmUgaXMgbm8gd2F5IHRvIGtub3cgdGhlIGxvY2F0aW9uIG9mIG9mZnNjcmVlbiBpbmRpY2VzIG9yIGhhbmRsZSBmYWlsdXJlcy4nLFxuICAgICAgKTtcbiAgICAgIG9uU2Nyb2xsVG9JbmRleEZhaWxlZCh7XG4gICAgICAgIGF2ZXJhZ2VJdGVtTGVuZ3RoOiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCxcbiAgICAgICAgaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleDogdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCxcbiAgICAgICAgaW5kZXgsXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3goaW5kZXgpO1xuICAgIGNvbnN0IG9mZnNldCA9XG4gICAgICBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgZnJhbWUub2Zmc2V0IC1cbiAgICAgICAgICAodmlld1Bvc2l0aW9uIHx8IDApICpcbiAgICAgICAgICAgICh0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggLSBmcmFtZS5sZW5ndGgpLFxuICAgICAgKSAtICh2aWV3T2Zmc2V0IHx8IDApO1xuICAgIC8qICRGbG93Rml4TWUoPj0wLjUzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIscmVhY3RfbmF0aXZlX29zcykgVGhpcyBjb21tZW50XG4gICAgICogc3VwcHJlc3NlcyBhbiBlcnJvciB3aGVuIHVwZ3JhZGluZyBGbG93J3Mgc3VwcG9ydCBmb3IgUmVhY3QuIFRvIHNlZSB0aGVcbiAgICAgKiBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICB0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8oXG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXNcbiAgICAgICAqIGNvbW1lbnQgc3VwcHJlc3NlcyBhbiBlcnJvciB3aGVuIHVwZ3JhZGluZyBGbG93J3Mgc3VwcG9ydCBmb3IgUmVhY3QuXG4gICAgICAgKiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgaG9yaXpvbnRhbCA/IHt4OiBvZmZzZXQsIGFuaW1hdGVkfSA6IHt5OiBvZmZzZXQsIGFuaW1hdGVkfSxcbiAgICApO1xuICB9XG5cbiAgLy8gc2Nyb2xsVG9JdGVtIG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcC4gUmVxdWlyZWQgbGluZWFyIHNjYW4gdGhyb3VnaCBpdGVtcyAtXG4gIC8vIHVzZSBzY3JvbGxUb0luZGV4IGluc3RlYWQgaWYgcG9zc2libGUuXG4gIHNjcm9sbFRvSXRlbShwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGl0ZW06IEl0ZW0sXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICB9KSB7XG4gICAgY29uc3Qge2l0ZW19ID0gcGFyYW1zO1xuICAgIGNvbnN0IHtkYXRhLCBnZXRJdGVtLCBnZXRJdGVtQ291bnR9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpdGVtQ291bnQgPSBnZXRJdGVtQ291bnQoZGF0YSk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGl0ZW1Db3VudDsgaW5kZXgrKykge1xuICAgICAgaWYgKGdldEl0ZW0oZGF0YSwgaW5kZXgpID09PSBpdGVtKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7Li4ucGFyYW1zLCBpbmRleH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGEgc3BlY2lmaWMgY29udGVudCBwaXhlbCBvZmZzZXQgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIFBhcmFtIGBvZmZzZXRgIGV4cGVjdHMgdGhlIG9mZnNldCB0byBzY3JvbGwgdG8uXG4gICAqIEluIGNhc2Ugb2YgYGhvcml6b250YWxgIGlzIHRydWUsIHRoZSBvZmZzZXQgaXMgdGhlIHgtdmFsdWUsXG4gICAqIGluIGFueSBvdGhlciBjYXNlIHRoZSBvZmZzZXQgaXMgdGhlIHktdmFsdWUuXG4gICAqXG4gICAqIFBhcmFtIGBhbmltYXRlZGAgKGB0cnVlYCBieSBkZWZhdWx0KSBkZWZpbmVzIHdoZXRoZXIgdGhlIGxpc3RcbiAgICogc2hvdWxkIGRvIGFuIGFuaW1hdGlvbiB3aGlsZSBzY3JvbGxpbmcuXG4gICAqL1xuICBzY3JvbGxUb09mZnNldChwYXJhbXM6IHthbmltYXRlZD86ID9ib29sZWFuLCBvZmZzZXQ6IG51bWJlcn0pIHtcbiAgICBjb25zdCB7YW5pbWF0ZWQsIG9mZnNldH0gPSBwYXJhbXM7XG4gICAgLyogJEZsb3dGaXhNZSg+PTAuNTMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYixyZWFjdF9uYXRpdmVfb3NzKSBUaGlzIGNvbW1lbnRcbiAgICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIHdoZW4gdXBncmFkaW5nIEZsb3cncyBzdXBwb3J0IGZvciBSZWFjdC4gVG8gc2VlIHRoZVxuICAgICAqIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgIHRoaXMuX3Njcm9sbFJlZi5zY3JvbGxUbyhcbiAgICAgIC8qICRGbG93Rml4TWUoPj0wLjUzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIscmVhY3RfbmF0aXZlX29zcykgVGhpc1xuICAgICAgICogY29tbWVudCBzdXBwcmVzc2VzIGFuIGVycm9yIHdoZW4gdXBncmFkaW5nIEZsb3cncyBzdXBwb3J0IGZvciBSZWFjdC5cbiAgICAgICAqIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICB0aGlzLnByb3BzLmhvcml6b250YWwgPyB7eDogb2Zmc2V0LCBhbmltYXRlZH0gOiB7eTogb2Zmc2V0LCBhbmltYXRlZH0sXG4gICAgKTtcbiAgfVxuXG4gIHJlY29yZEludGVyYWN0aW9uKCkge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0ID0+IHtcbiAgICAgIHQudmlld2FiaWxpdHlIZWxwZXIucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMuZGF0YSk7XG4gIH1cblxuICBmbGFzaFNjcm9sbEluZGljYXRvcnMoKSB7XG4gICAgLyogJEZsb3dGaXhNZSg+PTAuNTMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYixyZWFjdF9uYXRpdmVfb3NzKSBUaGlzIGNvbW1lbnRcbiAgICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIHdoZW4gdXBncmFkaW5nIEZsb3cncyBzdXBwb3J0IGZvciBSZWFjdC4gVG8gc2VlIHRoZVxuICAgICAqIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgIHRoaXMuX3Njcm9sbFJlZi5mbGFzaFNjcm9sbEluZGljYXRvcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGhhbmRsZSB0byB0aGUgdW5kZXJseWluZyBzY3JvbGwgcmVzcG9uZGVyLlxuICAgKiBOb3RlIHRoYXQgYHRoaXMuX3Njcm9sbFJlZmAgbWlnaHQgbm90IGJlIGEgYFNjcm9sbFZpZXdgLCBzbyB3ZVxuICAgKiBuZWVkIHRvIGNoZWNrIHRoYXQgaXQgcmVzcG9uZHMgdG8gYGdldFNjcm9sbFJlc3BvbmRlcmAgYmVmb3JlIGNhbGxpbmcgaXQuXG4gICAqL1xuICBnZXRTY3JvbGxSZXNwb25kZXIoKSB7XG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZiAmJiB0aGlzLl9zY3JvbGxSZWYuZ2V0U2Nyb2xsUmVzcG9uZGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlc3BvbmRlcigpO1xuICAgIH1cbiAgfVxuXG4gIGdldFNjcm9sbGFibGVOb2RlKCkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbGFibGVOb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbGFibGVOb2RlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZSh0aGlzLl9zY3JvbGxSZWYpO1xuICAgIH1cbiAgfVxuXG4gIHNldE5hdGl2ZVByb3BzKHByb3BzOiBPYmplY3QpIHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmKSB7XG4gICAgICB0aGlzLl9zY3JvbGxSZWYuc2V0TmF0aXZlUHJvcHMocHJvcHMpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZVZpcnR1YWxpemF0aW9uOiBmYWxzZSxcbiAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICBpbml0aWFsTnVtVG9SZW5kZXI6IDEwLFxuICAgIGtleUV4dHJhY3RvcjogKGl0ZW06IEl0ZW0sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChpdGVtLmtleSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmtleTtcbiAgICAgIH1cbiAgICAgIF91c2VkSW5kZXhGb3JLZXkgPSB0cnVlO1xuICAgICAgaWYgKGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSA9IGl0ZW0udHlwZS5kaXNwbGF5TmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBTdHJpbmcoaW5kZXgpO1xuICAgIH0sXG4gICAgbWF4VG9SZW5kZXJQZXJCYXRjaDogMTAsXG4gICAgb25FbmRSZWFjaGVkVGhyZXNob2xkOiAyLCAvLyBtdWx0aXBsZXMgb2YgbGVuZ3RoXG4gICAgc2Nyb2xsRXZlbnRUaHJvdHRsZTogNTAsXG4gICAgdXBkYXRlQ2VsbHNCYXRjaGluZ1BlcmlvZDogNTAsXG4gICAgd2luZG93U2l6ZTogMjEsIC8vIG11bHRpcGxlcyBvZiBsZW5ndGhcbiAgfTtcblxuICBzdGF0aWMgY29udGV4dFR5cGVzID0ge1xuICAgIHZpcnR1YWxpemVkQ2VsbDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIGNlbGxLZXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfSksXG4gICAgdmlydHVhbGl6ZWRMaXN0OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgZ2V0U2Nyb2xsTWV0cmljczogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICBob3Jpem9udGFsOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgIGdldE91dGVybW9zdFBhcmVudExpc3RSZWY6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgZ2V0TmVzdGVkQ2hpbGRTdGF0ZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICByZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIH0pLFxuICB9O1xuXG4gIHN0YXRpYyBjaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgICB2aXJ0dWFsaXplZExpc3Q6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBnZXRTY3JvbGxNZXRyaWNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIGhvcml6b250YWw6IFByb3BUeXBlcy5ib29sLFxuICAgICAgZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICBnZXROZXN0ZWRDaGlsZFN0YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICB1bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgfSksXG4gIH07XG5cbiAgZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHJldHVybiB7XG4gICAgICB2aXJ0dWFsaXplZExpc3Q6IHtcbiAgICAgICAgZ2V0U2Nyb2xsTWV0cmljczogdGhpcy5fZ2V0U2Nyb2xsTWV0cmljcyxcbiAgICAgICAgaG9yaXpvbnRhbDogdGhpcy5wcm9wcy5ob3Jpem9udGFsLFxuICAgICAgICBnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmOiB0aGlzLl9nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmLFxuICAgICAgICBnZXROZXN0ZWRDaGlsZFN0YXRlOiB0aGlzLl9nZXROZXN0ZWRDaGlsZFN0YXRlLFxuICAgICAgICByZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHRoaXMuX3JlZ2lzdGVyQXNOZXN0ZWRDaGlsZCxcbiAgICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHRoaXMuX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgX2dldENlbGxLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKFxuICAgICAgKHRoaXMuY29udGV4dC52aXJ0dWFsaXplZENlbGwgJiYgdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkQ2VsbC5jZWxsS2V5KSB8fFxuICAgICAgJ3Jvb3RMaXN0J1xuICAgICk7XG4gIH1cblxuICBfZ2V0U2Nyb2xsTWV0cmljcyA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgfTtcblxuICBoYXNNb3JlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYXNNb3JlO1xuICB9XG5cbiAgX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdC5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBfZ2V0TmVzdGVkQ2hpbGRTdGF0ZSA9IChrZXk6IHN0cmluZyk6ID9DaGlsZExpc3RTdGF0ZSA9PiB7XG4gICAgY29uc3QgZXhpc3RpbmdDaGlsZERhdGEgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChrZXkpO1xuICAgIHJldHVybiBleGlzdGluZ0NoaWxkRGF0YSAmJiBleGlzdGluZ0NoaWxkRGF0YS5zdGF0ZTtcbiAgfTtcblxuICBfcmVnaXN0ZXJBc05lc3RlZENoaWxkID0gKGNoaWxkTGlzdDoge1xuICAgIGNlbGxLZXk6IHN0cmluZyxcbiAgICBrZXk6IHN0cmluZyxcbiAgICByZWY6IFZpcnR1YWxpemVkTGlzdCxcbiAgfSk6ID9DaGlsZExpc3RTdGF0ZSA9PiB7XG4gICAgLy8gUmVnaXN0ZXIgdGhlIG1hcHBpbmcgYmV0d2VlbiB0aGlzIGNoaWxkIGtleSBhbmQgdGhlIGNlbGxLZXkgZm9yIGl0cyBjZWxsXG4gICAgY29uc3QgY2hpbGRMaXN0c0luQ2VsbCA9XG4gICAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5nZXQoY2hpbGRMaXN0LmNlbGxLZXkpIHx8IG5ldyBTZXQoKTtcbiAgICBjaGlsZExpc3RzSW5DZWxsLmFkZChjaGlsZExpc3Qua2V5KTtcbiAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5zZXQoY2hpbGRMaXN0LmNlbGxLZXksIGNoaWxkTGlzdHNJbkNlbGwpO1xuXG4gICAgY29uc3QgZXhpc3RpbmdDaGlsZERhdGEgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChjaGlsZExpc3Qua2V5KTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICAhKGV4aXN0aW5nQ2hpbGREYXRhICYmIGV4aXN0aW5nQ2hpbGREYXRhLnJlZiAhPT0gbnVsbCksXG4gICAgICAnQSBWaXJ0dWFsaXplZExpc3QgY29udGFpbnMgYSBjZWxsIHdoaWNoIGl0c2VsZiBjb250YWlucyAnICtcbiAgICAgICAgJ21vcmUgdGhhbiBvbmUgVmlydHVhbGl6ZWRMaXN0IG9mIHRoZSBzYW1lIG9yaWVudGF0aW9uIGFzIHRoZSBwYXJlbnQgJyArXG4gICAgICAgICdsaXN0LiBZb3UgbXVzdCBwYXNzIGEgdW5pcXVlIGxpc3RLZXkgcHJvcCB0byBlYWNoIHNpYmxpbmcgbGlzdC4nLFxuICAgICk7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zZXQoY2hpbGRMaXN0LmtleSwge1xuICAgICAgcmVmOiBjaGlsZExpc3QucmVmLFxuICAgICAgc3RhdGU6IG51bGwsXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5faGFzSW50ZXJhY3RlZCkge1xuICAgICAgY2hpbGRMaXN0LnJlZi5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH1cbiAgfTtcblxuICBfdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQgPSAoY2hpbGRMaXN0OiB7XG4gICAga2V5OiBzdHJpbmcsXG4gICAgc3RhdGU6IENoaWxkTGlzdFN0YXRlLFxuICB9KTogdm9pZCA9PiB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zZXQoY2hpbGRMaXN0LmtleSwge1xuICAgICAgcmVmOiBudWxsLFxuICAgICAgc3RhdGU6IGNoaWxkTGlzdC5zdGF0ZSxcbiAgICB9KTtcbiAgfTtcblxuICBzdGF0ZTogU3RhdGU7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBjb250ZXh0OiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgaW52YXJpYW50KFxuICAgICAgIXByb3BzLm9uU2Nyb2xsIHx8ICFwcm9wcy5vblNjcm9sbC5fX2lzTmF0aXZlLFxuICAgICAgJ0NvbXBvbmVudHMgYmFzZWQgb24gVmlydHVhbGl6ZWRMaXN0IG11c3QgYmUgd3JhcHBlZCB3aXRoIEFuaW1hdGVkLmNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50ICcgK1xuICAgICAgICAndG8gc3VwcG9ydCBuYXRpdmUgb25TY3JvbGwgZXZlbnRzIHdpdGggdXNlTmF0aXZlRHJpdmVyJyxcbiAgICApO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgcHJvcHMud2luZG93U2l6ZSA+IDAsXG4gICAgICAnVmlydHVhbGl6ZWRMaXN0OiBUaGUgd2luZG93U2l6ZSBwcm9wIG11c3QgYmUgcHJlc2VudCBhbmQgc2V0IHRvIGEgdmFsdWUgZ3JlYXRlciB0aGFuIDAuJyxcbiAgICApO1xuXG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIgPSBuZXcgRmlsbFJhdGVIZWxwZXIodGhpcy5fZ2V0RnJhbWVNZXRyaWNzKTtcbiAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlciA9IG5ldyBCYXRjaGluYXRvcihcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXIsXG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2QsXG4gICAgKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycykge1xuICAgICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMgPSB0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycy5tYXAoXG4gICAgICAgIHBhaXIgPT4gKHtcbiAgICAgICAgICB2aWV3YWJpbGl0eUhlbHBlcjogbmV3IFZpZXdhYmlsaXR5SGVscGVyKHBhaXIudmlld2FiaWxpdHlDb25maWcpLFxuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHBhaXIub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5wdXNoKHtcbiAgICAgICAgdmlld2FiaWxpdHlIZWxwZXI6IG5ldyBWaWV3YWJpbGl0eUhlbHBlcih0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnKSxcbiAgICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZDogdGhpcy5wcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGluaXRpYWxTdGF0ZSA9IHtcbiAgICAgIGZpcnN0OiB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCB8fCAwLFxuICAgICAgbGFzdDpcbiAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKSxcbiAgICAgICAgICAodGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggfHwgMCkgKyB0aGlzLnByb3BzLmluaXRpYWxOdW1Ub1JlbmRlcixcbiAgICAgICAgKSAtIDEsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgY29uc3Qgc3RvcmVkU3RhdGUgPSB0aGlzLmNvbnRleHQudmlydHVhbGl6ZWRMaXN0LmdldE5lc3RlZENoaWxkU3RhdGUoXG4gICAgICAgIHRoaXMucHJvcHMubGlzdEtleSB8fCB0aGlzLl9nZXRDZWxsS2V5KCksXG4gICAgICApO1xuICAgICAgaWYgKHN0b3JlZFN0YXRlKSB7XG4gICAgICAgIGluaXRpYWxTdGF0ZSA9IHN0b3JlZFN0YXRlO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RvcmVkU3RhdGU7XG4gICAgICAgIHRoaXMuX2ZyYW1lcyA9IHN0b3JlZFN0YXRlLmZyYW1lcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICB0aGlzLmNvbnRleHQudmlydHVhbGl6ZWRMaXN0LnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCh7XG4gICAgICAgIGNlbGxLZXk6IHRoaXMuX2dldENlbGxLZXkoKSxcbiAgICAgICAga2V5OiB0aGlzLnByb3BzLmxpc3RLZXkgfHwgdGhpcy5fZ2V0Q2VsbEtleSgpLFxuICAgICAgICByZWY6IHRoaXMsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC52aXJ0dWFsaXplZExpc3QudW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQoe1xuICAgICAgICBrZXk6IHRoaXMucHJvcHMubGlzdEtleSB8fCB0aGlzLl9nZXRDZWxsS2V5KCksXG4gICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgZmlyc3Q6IHRoaXMuc3RhdGUuZmlyc3QsXG4gICAgICAgICAgbGFzdDogdGhpcy5zdGF0ZS5sYXN0LFxuICAgICAgICAgIGZyYW1lczogdGhpcy5fZnJhbWVzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuX3VwZGF0ZVZpZXdhYmxlSXRlbXMobnVsbCk7XG4gICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIuZGlzcG9zZSh7YWJvcnQ6IHRydWV9KTtcbiAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgIHR1cGxlLnZpZXdhYmlsaXR5SGVscGVyLmRpc3Bvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9maWxsUmF0ZUhlbHBlci5kZWFjdGl2YXRlQW5kRmx1c2goKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV3UHJvcHM6IFByb3BzLCBwcmV2U3RhdGU6IFN0YXRlKSB7XG4gICAgY29uc3Qge2RhdGEsIGV4dHJhRGF0YSwgZ2V0SXRlbUNvdW50LCBtYXhUb1JlbmRlclBlckJhdGNofSA9IG5ld1Byb3BzO1xuICAgIC8vIGZpcnN0IGFuZCBsYXN0IGNvdWxkIGJlIHN0YWxlIChlLmcuIGlmIGEgbmV3LCBzaG9ydGVyIGl0ZW1zIHByb3BzIGlzIHBhc3NlZCBpbiksIHNvIHdlIG1ha2VcbiAgICAvLyBzdXJlIHdlJ3JlIHJlbmRlcmluZyBhIHJlYXNvbmFibGUgcmFuZ2UgaGVyZS5cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3Q6IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLm1pbihwcmV2U3RhdGUuZmlyc3QsIGdldEl0ZW1Db3VudChkYXRhKSAtIDEgLSBtYXhUb1JlbmRlclBlckJhdGNoKSxcbiAgICAgICksXG4gICAgICBsYXN0OiBNYXRoLm1heCgwLCBNYXRoLm1pbihwcmV2U3RhdGUubGFzdCwgZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSkpLFxuICAgIH07XG4gIH1cblxuICBfcHVzaENlbGxzKFxuICAgIGNlbGxzOiBBcnJheTxPYmplY3Q+LFxuICAgIHN0aWNreUhlYWRlckluZGljZXM6IEFycmF5PG51bWJlcj4sXG4gICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wczogU2V0PG51bWJlcj4sXG4gICAgZmlyc3Q6IG51bWJlcixcbiAgICBsYXN0OiBudW1iZXIsXG4gICAgaW52ZXJzaW9uU3R5bGU6ID9EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcCxcbiAgKSB7XG4gICAgY29uc3Qge1xuICAgICAgQ2VsbFJlbmRlcmVyQ29tcG9uZW50LFxuICAgICAgSXRlbVNlcGFyYXRvckNvbXBvbmVudCxcbiAgICAgIGRhdGEsXG4gICAgICBnZXRJdGVtLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgaG9yaXpvbnRhbCxcbiAgICAgIGtleUV4dHJhY3RvcixcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBzdGlja3lPZmZzZXQgPSB0aGlzLnByb3BzLkxpc3RIZWFkZXJDb21wb25lbnQgPyAxIDogMDtcbiAgICBjb25zdCBlbmQgPSBnZXRJdGVtQ291bnQoZGF0YSkgLSAxO1xuICAgIGxldCBwcmV2Q2VsbEtleTtcbiAgICBsYXN0ID0gTWF0aC5taW4oZW5kLCBsYXN0KTtcbiAgICBmb3IgKGxldCBpaSA9IGZpcnN0OyBpaSA8PSBsYXN0OyBpaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZ2V0SXRlbShkYXRhLCBpaSk7XG4gICAgICBjb25zdCBrZXkgPSBrZXlFeHRyYWN0b3IoaXRlbSwgaWkpO1xuICAgICAgdGhpcy5faW5kaWNlc1RvS2V5cy5zZXQoaWksIGtleSk7XG4gICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5oYXMoaWkgKyBzdGlja3lPZmZzZXQpKSB7XG4gICAgICAgIHN0aWNreUhlYWRlckluZGljZXMucHVzaChjZWxscy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgPENlbGxSZW5kZXJlclxuICAgICAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudD17Q2VsbFJlbmRlcmVyQ29tcG9uZW50fVxuICAgICAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ9e2lpIDwgZW5kID8gSXRlbVNlcGFyYXRvckNvbXBvbmVudCA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBjZWxsS2V5PXtrZXl9XG4gICAgICAgICAgZmlsbFJhdGVIZWxwZXI9e3RoaXMuX2ZpbGxSYXRlSGVscGVyfVxuICAgICAgICAgIGhvcml6b250YWw9e2hvcml6b250YWx9XG4gICAgICAgICAgaW5kZXg9e2lpfVxuICAgICAgICAgIGludmVyc2lvblN0eWxlPXtpbnZlcnNpb25TdHlsZX1cbiAgICAgICAgICBpdGVtPXtpdGVtfVxuICAgICAgICAgIGtleT17a2V5fVxuICAgICAgICAgIHByZXZDZWxsS2V5PXtwcmV2Q2VsbEtleX1cbiAgICAgICAgICBvblVwZGF0ZVNlcGFyYXRvcnM9e3RoaXMuX29uVXBkYXRlU2VwYXJhdG9yc31cbiAgICAgICAgICBvbkxheW91dD17ZSA9PiB0aGlzLl9vbkNlbGxMYXlvdXQoZSwga2V5LCBpaSl9XG4gICAgICAgICAgb25Vbm1vdW50PXt0aGlzLl9vbkNlbGxVbm1vdW50fVxuICAgICAgICAgIHBhcmVudFByb3BzPXt0aGlzLnByb3BzfVxuICAgICAgICAgIHJlZj17cmVmID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxSZWZzW2tleV0gPSByZWY7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuICAgICAgcHJldkNlbGxLZXkgPSBrZXk7XG4gICAgfVxuICB9XG5cbiAgX29uVXBkYXRlU2VwYXJhdG9ycyA9IChrZXlzOiBBcnJheTw/c3RyaW5nPiwgbmV3UHJvcHM6IE9iamVjdCkgPT4ge1xuICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgcmVmID0ga2V5ICE9IG51bGwgJiYgdGhpcy5fY2VsbFJlZnNba2V5XTtcbiAgICAgIHJlZiAmJiByZWYudXBkYXRlU2VwYXJhdG9yUHJvcHMobmV3UHJvcHMpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGlzYWJsZVZpcnR1YWxpemF0aW9uO1xuICB9XG5cbiAgX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpOiBib29sZWFuIHtcbiAgICBjb25zdCBuZXN0ZWRDb250ZXh0ID0gdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdDtcbiAgICByZXR1cm4gISEoXG4gICAgICBuZXN0ZWRDb250ZXh0ICYmICEhbmVzdGVkQ29udGV4dC5ob3Jpem9udGFsID09PSAhIXRoaXMucHJvcHMuaG9yaXpvbnRhbFxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGNvbnN0IGZsYXRTdHlsZXMgPSBmbGF0dGVuU3R5bGUodGhpcy5wcm9wcy5jb250ZW50Q29udGFpbmVyU3R5bGUpO1xuICAgICAgd2FybmluZyhcbiAgICAgICAgZmxhdFN0eWxlcyA9PSBudWxsIHx8IGZsYXRTdHlsZXMuZmxleFdyYXAgIT09ICd3cmFwJyxcbiAgICAgICAgJ2BmbGV4V3JhcDogYHdyYXBgYCBpcyBub3Qgc3VwcG9ydGVkIHdpdGggdGhlIGBWaXJ0dWFsaXplZExpc3RgIGNvbXBvbmVudHMuJyArXG4gICAgICAgICAgJ0NvbnNpZGVyIHVzaW5nIGBudW1Db2x1bW5zYCB3aXRoIGBGbGF0TGlzdGAgaW5zdGVhZC4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgTGlzdEVtcHR5Q29tcG9uZW50LFxuICAgICAgTGlzdEZvb3RlckNvbXBvbmVudCxcbiAgICAgIExpc3RIZWFkZXJDb21wb25lbnQsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge2RhdGEsIGhvcml6b250YWx9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgPSB0aGlzLl9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQoKTtcbiAgICBjb25zdCBpbnZlcnNpb25TdHlsZSA9IHRoaXMucHJvcHMuaW52ZXJ0ZWRcbiAgICAgID8gdGhpcy5wcm9wcy5ob3Jpem9udGFsXG4gICAgICAgID8gc3R5bGVzLmhvcml6b250YWxseUludmVydGVkXG4gICAgICAgIDogc3R5bGVzLnZlcnRpY2FsbHlJbnZlcnRlZFxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGNlbGxzID0gW107XG4gICAgY29uc3Qgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyA9IG5ldyBTZXQodGhpcy5wcm9wcy5zdGlja3lIZWFkZXJJbmRpY2VzKTtcbiAgICBjb25zdCBzdGlja3lIZWFkZXJJbmRpY2VzID0gW107XG4gICAgaWYgKExpc3RIZWFkZXJDb21wb25lbnQpIHtcbiAgICAgIGlmIChzdGlja3lJbmRpY2VzRnJvbVByb3BzLmhhcygwKSkge1xuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLnB1c2goMCk7XG4gICAgICB9XG4gICAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQoTGlzdEhlYWRlckNvbXBvbmVudCkgPyAoXG4gICAgICAgIExpc3RIZWFkZXJDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgPExpc3RIZWFkZXJDb21wb25lbnQgLz5cbiAgICAgICk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICA8VmlydHVhbGl6ZWRDZWxsV3JhcHBlclxuICAgICAgICAgIGNlbGxLZXk9e3RoaXMuX2dldENlbGxLZXkoKSArICctaGVhZGVyJ31cbiAgICAgICAgICBrZXk9XCIkaGVhZGVyXCI+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIG9uTGF5b3V0PXt0aGlzLl9vbkxheW91dEhlYWRlcn1cbiAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLkxpc3RIZWFkZXJDb21wb25lbnRTdHlsZSxcbiAgICAgICAgICAgICl9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lIC0gVHlwaW5nIFJlYWN0TmF0aXZlQ29tcG9uZW50IHJldmVhbGVkIGVycm9yc1xuICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L1ZpcnR1YWxpemVkQ2VsbFdyYXBwZXI+LFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQoZGF0YSk7XG4gICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgIF91c2VkSW5kZXhGb3JLZXkgPSBmYWxzZTtcbiAgICAgIF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWUgPSAnJztcbiAgICAgIGNvbnN0IHNwYWNlcktleSA9ICFob3Jpem9udGFsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuICAgICAgY29uc3QgbGFzdEluaXRpYWxJbmRleCA9IHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4XG4gICAgICAgID8gLTFcbiAgICAgICAgOiB0aGlzLnByb3BzLmluaXRpYWxOdW1Ub1JlbmRlciAtIDE7XG4gICAgICBjb25zdCB7Zmlyc3QsIGxhc3R9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIHRoaXMuX3B1c2hDZWxscyhcbiAgICAgICAgY2VsbHMsXG4gICAgICAgIHN0aWNreUhlYWRlckluZGljZXMsXG4gICAgICAgIHN0aWNreUluZGljZXNGcm9tUHJvcHMsXG4gICAgICAgIDAsXG4gICAgICAgIGxhc3RJbml0aWFsSW5kZXgsXG4gICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGZpcnN0QWZ0ZXJJbml0aWFsID0gTWF0aC5tYXgobGFzdEluaXRpYWxJbmRleCArIDEsIGZpcnN0KTtcbiAgICAgIGlmICghaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkICYmIGZpcnN0ID4gbGFzdEluaXRpYWxJbmRleCArIDEpIHtcbiAgICAgICAgbGV0IGluc2VydGVkU3RpY2t5U3BhY2VyID0gZmFsc2U7XG4gICAgICAgIGlmIChzdGlja3lJbmRpY2VzRnJvbVByb3BzLnNpemUgPiAwKSB7XG4gICAgICAgICAgY29uc3Qgc3RpY2t5T2Zmc2V0ID0gTGlzdEhlYWRlckNvbXBvbmVudCA/IDEgOiAwO1xuICAgICAgICAgIC8vIFNlZSBpZiB0aGVyZSBhcmUgYW55IHN0aWNreSBoZWFkZXJzIGluIHRoZSB2aXJ0dWFsaXplZCBzcGFjZSB0aGF0IHdlIG5lZWQgdG8gcmVuZGVyLlxuICAgICAgICAgIGZvciAobGV0IGlpID0gZmlyc3RBZnRlckluaXRpYWwgLSAxOyBpaSA+IGxhc3RJbml0aWFsSW5kZXg7IGlpLS0pIHtcbiAgICAgICAgICAgIGlmIChzdGlja3lJbmRpY2VzRnJvbVByb3BzLmhhcyhpaSArIHN0aWNreU9mZnNldCkpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdEJsb2NrID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3RJbml0aWFsSW5kZXgpO1xuICAgICAgICAgICAgICBjb25zdCBzdGlja3lCbG9jayA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChpaSk7XG4gICAgICAgICAgICAgIGNvbnN0IGxlYWRTcGFjZSA9IHN0aWNreUJsb2NrLm9mZnNldCAtIGluaXRCbG9jay5vZmZzZXQ7XG4gICAgICAgICAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgICAgICAgICAgPFZpZXcga2V5PVwiJHN0aWNreV9sZWFkXCIgc3R5bGU9e3tbc3BhY2VyS2V5XTogbGVhZFNwYWNlfX0gLz4sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHRoaXMuX3B1c2hDZWxscyhcbiAgICAgICAgICAgICAgICBjZWxscyxcbiAgICAgICAgICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgICAgICAgICAgICAgIHN0aWNreUluZGljZXNGcm9tUHJvcHMsXG4gICAgICAgICAgICAgICAgaWksXG4gICAgICAgICAgICAgICAgaWksXG4gICAgICAgICAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IHRyYWlsU3BhY2UgPVxuICAgICAgICAgICAgICAgIHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChmaXJzdCkub2Zmc2V0IC1cbiAgICAgICAgICAgICAgICAoc3RpY2t5QmxvY2sub2Zmc2V0ICsgc3RpY2t5QmxvY2subGVuZ3RoKTtcbiAgICAgICAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICAgICAgICA8VmlldyBrZXk9XCIkc3RpY2t5X3RyYWlsXCIgc3R5bGU9e3tbc3BhY2VyS2V5XTogdHJhaWxTcGFjZX19IC8+LFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpbnNlcnRlZFN0aWNreVNwYWNlciA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWluc2VydGVkU3RpY2t5U3BhY2VyKSB7XG4gICAgICAgICAgY29uc3QgaW5pdEJsb2NrID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3RJbml0aWFsSW5kZXgpO1xuICAgICAgICAgIGNvbnN0IGZpcnN0U3BhY2UgPVxuICAgICAgICAgICAgdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGZpcnN0KS5vZmZzZXQgLVxuICAgICAgICAgICAgKGluaXRCbG9jay5vZmZzZXQgKyBpbml0QmxvY2subGVuZ3RoKTtcbiAgICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgICAgPFZpZXcga2V5PVwiJGxlYWRfc3BhY2VyXCIgc3R5bGU9e3tbc3BhY2VyS2V5XTogZmlyc3RTcGFjZX19IC8+LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3B1c2hDZWxscyhcbiAgICAgICAgY2VsbHMsXG4gICAgICAgIHN0aWNreUhlYWRlckluZGljZXMsXG4gICAgICAgIHN0aWNreUluZGljZXNGcm9tUHJvcHMsXG4gICAgICAgIGZpcnN0QWZ0ZXJJbml0aWFsLFxuICAgICAgICBsYXN0LFxuICAgICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgICk7XG4gICAgICBpZiAoIXRoaXMuX2hhc1dhcm5lZC5rZXlzICYmIF91c2VkSW5kZXhGb3JLZXkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdWaXJ0dWFsaXplZExpc3Q6IG1pc3Npbmcga2V5cyBmb3IgaXRlbXMsIG1ha2Ugc3VyZSB0byBzcGVjaWZ5IGEga2V5IHByb3BlcnR5IG9uIGVhY2ggJyArXG4gICAgICAgICAgICAnaXRlbSBvciBwcm92aWRlIGEgY3VzdG9tIGtleUV4dHJhY3Rvci4nLFxuICAgICAgICAgIF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWUsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX2hhc1dhcm5lZC5rZXlzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkICYmIGxhc3QgPCBpdGVtQ291bnQgLSAxKSB7XG4gICAgICAgIGNvbnN0IGxhc3RGcmFtZSA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChsYXN0KTtcbiAgICAgICAgLy8gV2l0aG91dCBnZXRJdGVtTGF5b3V0LCB3ZSBsaW1pdCBvdXIgdGFpbCBzcGFjZXIgdG8gdGhlIF9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4IHRvXG4gICAgICAgIC8vIHByZXZlbnQgdGhlIHVzZXIgZm9yIGh5cGVyc2Nyb2xsaW5nIGludG8gdW4tbWVhc3VyZWQgYXJlYSBiZWNhdXNlIG90aGVyd2lzZSBjb250ZW50IHdpbGxcbiAgICAgICAgLy8gbGlrZWx5IGp1bXAgYXJvdW5kIGFzIGl0IHJlbmRlcnMgaW4gYWJvdmUgdGhlIHZpZXdwb3J0LlxuICAgICAgICBjb25zdCBlbmQgPSB0aGlzLnByb3BzLmdldEl0ZW1MYXlvdXRcbiAgICAgICAgICA/IGl0ZW1Db3VudCAtIDFcbiAgICAgICAgICA6IE1hdGgubWluKGl0ZW1Db3VudCAtIDEsIHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXgpO1xuICAgICAgICBjb25zdCBlbmRGcmFtZSA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChlbmQpO1xuICAgICAgICBjb25zdCB0YWlsU3BhY2VyTGVuZ3RoID1cbiAgICAgICAgICBlbmRGcmFtZS5vZmZzZXQgK1xuICAgICAgICAgIGVuZEZyYW1lLmxlbmd0aCAtXG4gICAgICAgICAgKGxhc3RGcmFtZS5vZmZzZXQgKyBsYXN0RnJhbWUubGVuZ3RoKTtcbiAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICA8VmlldyBrZXk9XCIkdGFpbF9zcGFjZXJcIiBzdHlsZT17e1tzcGFjZXJLZXldOiB0YWlsU3BhY2VyTGVuZ3RofX0gLz4sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChMaXN0RW1wdHlDb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQ6IFJlYWN0LkVsZW1lbnQ8YW55PiA9ICgoUmVhY3QuaXNWYWxpZEVsZW1lbnQoXG4gICAgICAgIExpc3RFbXB0eUNvbXBvbmVudCxcbiAgICAgICkgPyAoXG4gICAgICAgIExpc3RFbXB0eUNvbXBvbmVudFxuICAgICAgKSA6IChcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICA8TGlzdEVtcHR5Q29tcG9uZW50IC8+XG4gICAgICApKTogYW55KTtcbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIFJlYWN0LmNsb25lRWxlbWVudChlbGVtZW50LCB7XG4gICAgICAgICAga2V5OiAnJGVtcHR5JyxcbiAgICAgICAgICBvbkxheW91dDogZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25MYXlvdXRFbXB0eShldmVudCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wcm9wcy5vbkxheW91dCkge1xuICAgICAgICAgICAgICBlbGVtZW50LnByb3BzLm9uTGF5b3V0KGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlOiBbZWxlbWVudC5wcm9wcy5zdHlsZSwgaW52ZXJzaW9uU3R5bGVdLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChMaXN0Rm9vdGVyQ29tcG9uZW50KSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQoTGlzdEZvb3RlckNvbXBvbmVudCkgPyAoXG4gICAgICAgIExpc3RGb290ZXJDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgPExpc3RGb290ZXJDb21wb25lbnQgLz5cbiAgICAgICk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICA8VmlydHVhbGl6ZWRDZWxsV3JhcHBlclxuICAgICAgICAgIGNlbGxLZXk9e3RoaXMuX2dldENlbGxLZXkoKSArICctZm9vdGVyJ31cbiAgICAgICAgICBrZXk9XCIkZm9vdGVyXCI+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIG9uTGF5b3V0PXt0aGlzLl9vbkxheW91dEZvb3Rlcn1cbiAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLkxpc3RGb290ZXJDb21wb25lbnRTdHlsZSxcbiAgICAgICAgICAgICl9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lIC0gVHlwaW5nIFJlYWN0TmF0aXZlQ29tcG9uZW50IHJldmVhbGVkIGVycm9yc1xuICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L1ZpcnR1YWxpemVkQ2VsbFdyYXBwZXI+LFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qgc2Nyb2xsUHJvcHMgPSB7XG4gICAgICAuLi50aGlzLnByb3BzLFxuICAgICAgb25Db250ZW50U2l6ZUNoYW5nZTogdGhpcy5fb25Db250ZW50U2l6ZUNoYW5nZSxcbiAgICAgIG9uTGF5b3V0OiB0aGlzLl9vbkxheW91dCxcbiAgICAgIG9uU2Nyb2xsOiB0aGlzLl9vblNjcm9sbCxcbiAgICAgIG9uU2Nyb2xsQmVnaW5EcmFnOiB0aGlzLl9vblNjcm9sbEJlZ2luRHJhZyxcbiAgICAgIG9uU2Nyb2xsRW5kRHJhZzogdGhpcy5fb25TY3JvbGxFbmREcmFnLFxuICAgICAgb25Nb21lbnR1bVNjcm9sbEVuZDogdGhpcy5fb25Nb21lbnR1bVNjcm9sbEVuZCxcbiAgICAgIHNjcm9sbEV2ZW50VGhyb3R0bGU6IHRoaXMucHJvcHMuc2Nyb2xsRXZlbnRUaHJvdHRsZSwgLy8gVE9ETzogQW5kcm9pZCBzdXBwb3J0XG4gICAgICBpbnZlcnRTdGlja3lIZWFkZXJzOlxuICAgICAgICB0aGlzLnByb3BzLmludmVydFN0aWNreUhlYWRlcnMgIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gdGhpcy5wcm9wcy5pbnZlcnRTdGlja3lIZWFkZXJzXG4gICAgICAgICAgOiB0aGlzLnByb3BzLmludmVydGVkLFxuICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICB9O1xuICAgIGlmIChpbnZlcnNpb25TdHlsZSAmJiBpdGVtQ291bnQgIT09IDApIHtcbiAgICAgIC8qICRGbG93Rml4TWUoPj0wLjcwLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNzAgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZVxuICAgICAgICogdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIHNjcm9sbFByb3BzLnN0eWxlID0gW2ludmVyc2lvblN0eWxlLCB0aGlzLnByb3BzLnN0eWxlXTtcbiAgICB9XG5cbiAgICB0aGlzLl9oYXNNb3JlID1cbiAgICAgIHRoaXMuc3RhdGUubGFzdCA8IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSkgLSAxO1xuXG4gICAgY29uc3QgcmV0ID0gUmVhY3QuY2xvbmVFbGVtZW50KFxuICAgICAgKHRoaXMucHJvcHMucmVuZGVyU2Nyb2xsQ29tcG9uZW50IHx8IHRoaXMuX2RlZmF1bHRSZW5kZXJTY3JvbGxDb21wb25lbnQpKFxuICAgICAgICBzY3JvbGxQcm9wcyxcbiAgICAgICksXG4gICAgICAvLyAkRmxvd0ZpeE1lIEludmFsaWQgcHJvcCB1c2FnZVxuICAgICAge1xuICAgICAgICByZWY6IHRoaXMuX2NhcHR1cmVTY3JvbGxSZWYsXG4gICAgICB9LFxuICAgICAgY2VsbHMsXG4gICAgKTtcbiAgICBpZiAodGhpcy5wcm9wcy5kZWJ1Zykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFZpZXcgc3R5bGU9e3tmbGV4OiAxfX0+XG4gICAgICAgICAge3JldH1cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyRGVidWdPdmVybGF5KCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICBjb25zdCB7ZGF0YSwgZXh0cmFEYXRhfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGRhdGEgIT09IHByZXZQcm9wcy5kYXRhIHx8IGV4dHJhRGF0YSAhPT0gcHJldlByb3BzLmV4dHJhRGF0YSkge1xuICAgICAgdGhpcy5faGFzRGF0YUNoYW5nZWRTaW5jZUVuZFJlYWNoZWQgPSB0cnVlO1xuXG4gICAgICAvLyBjbGVhciB0aGUgdmlld2FibGVJbmRpY2VzIGNhY2hlIHRvIGFsc28gdHJpZ2dlclxuICAgICAgLy8gdGhlIG9uVmlld2FibGVJdGVtc0NoYW5nZWQgY2FsbGJhY2sgd2l0aCB0aGUgbmV3IGRhdGFcbiAgICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godHVwbGUgPT4ge1xuICAgICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5yZXNldFZpZXdhYmxlSW5kaWNlcygpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICB9XG5cbiAgX2F2ZXJhZ2VDZWxsTGVuZ3RoID0gMDtcbiAgLy8gTWFwcyBhIGNlbGwga2V5IHRvIHRoZSBzZXQgb2Yga2V5cyBmb3IgYWxsIG91dGVybW9zdCBjaGlsZCBsaXN0cyB3aXRoaW4gdGhhdCBjZWxsXG4gIF9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5czogTWFwPHN0cmluZywgU2V0PHN0cmluZz4+ID0gbmV3IE1hcCgpO1xuICBfY2VsbFJlZnMgPSB7fTtcbiAgX2ZpbGxSYXRlSGVscGVyOiBGaWxsUmF0ZUhlbHBlcjtcbiAgX2ZyYW1lcyA9IHt9O1xuICBfZm9vdGVyTGVuZ3RoID0gMDtcbiAgX2hhc0RhdGFDaGFuZ2VkU2luY2VFbmRSZWFjaGVkID0gdHJ1ZTtcbiAgX2hhc0ludGVyYWN0ZWQgPSBmYWxzZTtcbiAgX2hhc01vcmUgPSBmYWxzZTtcbiAgX2hhc1dhcm5lZCA9IHt9O1xuICBfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCA9IDA7XG4gIF9oZWFkZXJMZW5ndGggPSAwO1xuICBfaW5kaWNlc1RvS2V5czogTWFwPG51bWJlciwgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgX2hhc0RvbmVJbml0aWFsU2Nyb2xsID0gZmFsc2U7XG4gIF9uZXN0ZWRDaGlsZExpc3RzOiBNYXA8XG4gICAgc3RyaW5nLFxuICAgIHtyZWY6ID9WaXJ0dWFsaXplZExpc3QsIHN0YXRlOiA/Q2hpbGRMaXN0U3RhdGV9LFxuICA+ID0gbmV3IE1hcCgpO1xuICBfb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdDogbnVtYmVyID0gMDtcbiAgX3ByZXZQYXJlbnRPZmZzZXQ6IG51bWJlciA9IDA7XG4gIF9zY3JvbGxNZXRyaWNzID0ge1xuICAgIGNvbnRlbnRMZW5ndGg6IDAsXG4gICAgZE9mZnNldDogMCxcbiAgICBkdDogMTAsXG4gICAgb2Zmc2V0OiAwLFxuICAgIHRpbWVzdGFtcDogMCxcbiAgICB2ZWxvY2l0eTogMCxcbiAgICB2aXNpYmxlTGVuZ3RoOiAwLFxuICB9O1xuICBfc2Nyb2xsUmVmOiA/UmVhY3QuRWxlbWVudFJlZjxhbnk+ID0gbnVsbDtcbiAgX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gMDtcbiAgX3RvdGFsQ2VsbExlbmd0aCA9IDA7XG4gIF90b3RhbENlbGxzTWVhc3VyZWQgPSAwO1xuICBfdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXI6IEJhdGNoaW5hdG9yO1xuICBfdmlld2FiaWxpdHlUdXBsZXM6IEFycmF5PFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZT4gPSBbXTtcblxuICBfY2FwdHVyZVNjcm9sbFJlZiA9IHJlZiA9PiB7XG4gICAgdGhpcy5fc2Nyb2xsUmVmID0gcmVmO1xuICB9O1xuXG4gIF9jb21wdXRlQmxhbmtuZXNzKCkge1xuICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyLmNvbXB1dGVCbGFua25lc3MoXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgdGhpcy5zdGF0ZSxcbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MsXG4gICAgKTtcbiAgfVxuXG4gIF9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IG9uUmVmcmVzaCA9IHByb3BzLm9uUmVmcmVzaDtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIC8vICRGbG93Rml4TWUgLSBUeXBpbmcgUmVhY3ROYXRpdmVDb21wb25lbnQgcmV2ZWFsZWQgZXJyb3JzXG4gICAgICByZXR1cm4gPFZpZXcgey4uLnByb3BzfSAvPjtcbiAgICB9IGVsc2UgaWYgKG9uUmVmcmVzaCkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICB0eXBlb2YgcHJvcHMucmVmcmVzaGluZyA9PT0gJ2Jvb2xlYW4nLFxuICAgICAgICAnYHJlZnJlc2hpbmdgIHByb3AgbXVzdCBiZSBzZXQgYXMgYSBib29sZWFuIGluIG9yZGVyIHRvIHVzZSBgb25SZWZyZXNoYCwgYnV0IGdvdCBgJyArXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvcHMucmVmcmVzaGluZykgK1xuICAgICAgICAgICdgJyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAvLyAkRmxvd0ZpeE1lIEludmFsaWQgcHJvcCB1c2FnZVxuICAgICAgICA8U2Nyb2xsVmlld1xuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICByZWZyZXNoQ29udHJvbD17XG4gICAgICAgICAgICBwcm9wcy5yZWZyZXNoQ29udHJvbCA9PSBudWxsID8gKFxuICAgICAgICAgICAgICA8UmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgICAgICByZWZyZXNoaW5nPXtwcm9wcy5yZWZyZXNoaW5nfVxuICAgICAgICAgICAgICAgIG9uUmVmcmVzaD17b25SZWZyZXNofVxuICAgICAgICAgICAgICAgIHByb2dyZXNzVmlld09mZnNldD17cHJvcHMucHJvZ3Jlc3NWaWV3T2Zmc2V0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgcHJvcHMucmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lIEludmFsaWQgcHJvcCB1c2FnZVxuICAgICAgcmV0dXJuIDxTY3JvbGxWaWV3IHsuLi5wcm9wc30gLz47XG4gICAgfVxuICB9O1xuXG4gIF9vbkNlbGxMYXlvdXQoZSwgY2VsbEtleSwgaW5kZXgpIHtcbiAgICBjb25zdCBsYXlvdXQgPSBlLm5hdGl2ZUV2ZW50LmxheW91dDtcbiAgICBjb25zdCBuZXh0ID0ge1xuICAgICAgb2Zmc2V0OiB0aGlzLl9zZWxlY3RPZmZzZXQobGF5b3V0KSxcbiAgICAgIGxlbmd0aDogdGhpcy5fc2VsZWN0TGVuZ3RoKGxheW91dCksXG4gICAgICBpbmRleCxcbiAgICAgIGluTGF5b3V0OiB0cnVlLFxuICAgIH07XG4gICAgY29uc3QgY3VyciA9IHRoaXMuX2ZyYW1lc1tjZWxsS2V5XTtcbiAgICBpZiAoXG4gICAgICAhY3VyciB8fFxuICAgICAgbmV4dC5vZmZzZXQgIT09IGN1cnIub2Zmc2V0IHx8XG4gICAgICBuZXh0Lmxlbmd0aCAhPT0gY3Vyci5sZW5ndGggfHxcbiAgICAgIGluZGV4ICE9PSBjdXJyLmluZGV4XG4gICAgKSB7XG4gICAgICB0aGlzLl90b3RhbENlbGxMZW5ndGggKz0gbmV4dC5sZW5ndGggLSAoY3VyciA/IGN1cnIubGVuZ3RoIDogMCk7XG4gICAgICB0aGlzLl90b3RhbENlbGxzTWVhc3VyZWQgKz0gY3VyciA/IDAgOiAxO1xuICAgICAgdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGggPVxuICAgICAgICB0aGlzLl90b3RhbENlbGxMZW5ndGggLyB0aGlzLl90b3RhbENlbGxzTWVhc3VyZWQ7XG4gICAgICB0aGlzLl9mcmFtZXNbY2VsbEtleV0gPSBuZXh0O1xuICAgICAgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4LFxuICAgICAgICBpbmRleCxcbiAgICAgICk7XG4gICAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldLmluTGF5b3V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZExpc3RLZXlzID0gdGhpcy5fY2VsbEtleXNUb0NoaWxkTGlzdEtleXMuZ2V0KGNlbGxLZXkpO1xuICAgIGlmIChjaGlsZExpc3RLZXlzKSB7XG4gICAgICBmb3IgKGxldCBjaGlsZEtleSBvZiBjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkTGlzdCA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGNoaWxkS2V5KTtcbiAgICAgICAgY2hpbGRMaXN0ICYmXG4gICAgICAgICAgY2hpbGRMaXN0LnJlZiAmJlxuICAgICAgICAgIGNoaWxkTGlzdC5yZWYubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgfVxuXG4gIF9vbkNlbGxVbm1vdW50ID0gKGNlbGxLZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9mcmFtZXNbY2VsbEtleV07XG4gICAgaWYgKGN1cnIpIHtcbiAgICAgIHRoaXMuX2ZyYW1lc1tjZWxsS2V5XSA9IHsuLi5jdXJyLCBpbkxheW91dDogZmFsc2V9O1xuICAgIH1cbiAgfTtcblxuICBtZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0KCk6IHZvaWQge1xuICAgIC8vIFRPRE8gKFQzNTU3NDUzOCk6IGZpbmROb2RlSGFuZGxlIHNvbWV0aW1lcyBjcmFzaGVzIHdpdGggXCJVbmFibGUgdG8gZmluZFxuICAgIC8vIG5vZGUgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudFwiIGR1cmluZyBzY3JvbGxpbmdcbiAgICB0cnkge1xuICAgICAgVUlNYW5hZ2VyLm1lYXN1cmVMYXlvdXQoXG4gICAgICAgIFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKHRoaXMpLFxuICAgICAgICBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZShcbiAgICAgICAgICB0aGlzLmNvbnRleHQudmlydHVhbGl6ZWRMaXN0LmdldE91dGVybW9zdFBhcmVudExpc3RSZWYoKSxcbiAgICAgICAgKSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiVmlydHVhbGl6ZWRMaXN0OiBFbmNvdW50ZXJlZCBhbiBlcnJvciB3aGlsZSBtZWFzdXJpbmcgYSBsaXN0J3NcIiArXG4gICAgICAgICAgICAgICcgb2Zmc2V0IGZyb20gaXRzIGNvbnRhaW5pbmcgVmlydHVhbGl6ZWRMaXN0LicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgKHgsIHksIHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgICAgICB0aGlzLl9vZmZzZXRGcm9tUGFyZW50VmlydHVhbGl6ZWRMaXN0ID0gdGhpcy5fc2VsZWN0T2Zmc2V0KHt4LCB5fSk7XG4gICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKHtcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3Qgc2Nyb2xsTWV0cmljcyA9IHRoaXMuX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzKFxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdC5nZXRTY3JvbGxNZXRyaWNzKCksXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggPSBzY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQgPSBzY3JvbGxNZXRyaWNzLm9mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ21lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QgdGhyZXcgYW4gZXJyb3InLFxuICAgICAgICBlcnJvci5zdGFjayxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgX29uTGF5b3V0ID0gKGU6IE9iamVjdCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgLy8gTmVlZCB0byBhZGp1c3Qgb3VyIHNjcm9sbCBtZXRyaWNzIHRvIGJlIHJlbGF0aXZlIHRvIG91ciBjb250YWluaW5nXG4gICAgICAvLyBWaXJ0dWFsaXplZExpc3QgYmVmb3JlIHdlIGNhbiBtYWtlIGNsYWltcyBhYm91dCBsaXN0IGl0ZW0gdmlld2FiaWxpdHlcbiAgICAgIHRoaXMubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoXG4gICAgICAgIGUubmF0aXZlRXZlbnQubGF5b3V0LFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vbkxheW91dCAmJiB0aGlzLnByb3BzLm9uTGF5b3V0KGUpO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICB9O1xuXG4gIF9vbkxheW91dEVtcHR5ID0gZSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkxheW91dCAmJiB0aGlzLnByb3BzLm9uTGF5b3V0KGUpO1xuICB9O1xuXG4gIF9vbkxheW91dEZvb3RlciA9IGUgPT4ge1xuICAgIHRoaXMuX2Zvb3Rlckxlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aChlLm5hdGl2ZUV2ZW50LmxheW91dCk7XG4gIH07XG5cbiAgX29uTGF5b3V0SGVhZGVyID0gZSA9PiB7XG4gICAgdGhpcy5faGVhZGVyTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0KTtcbiAgfTtcblxuICBfcmVuZGVyRGVidWdPdmVybGF5KCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZSA9XG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggLyB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGg7XG4gICAgY29uc3QgZnJhbWVzSW5MYXlvdXQgPSBbXTtcbiAgICBjb25zdCBpdGVtQ291bnQgPSB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCh0aGlzLnByb3BzLmRhdGEpO1xuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBpdGVtQ291bnQ7IGlpKyspIHtcbiAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGlpKTtcbiAgICAgIC8qICRGbG93Rml4TWUoPj0wLjY4LjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjggd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzXG4gICAgICAgKiBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIGlmIChmcmFtZS5pbkxheW91dCkge1xuICAgICAgICBmcmFtZXNJbkxheW91dC5wdXNoKGZyYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgd2luZG93VG9wID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHRoaXMuc3RhdGUuZmlyc3QpLm9mZnNldDtcbiAgICBjb25zdCBmcmFtZUxhc3QgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3godGhpcy5zdGF0ZS5sYXN0KTtcbiAgICBjb25zdCB3aW5kb3dMZW4gPSBmcmFtZUxhc3Qub2Zmc2V0ICsgZnJhbWVMYXN0Lmxlbmd0aCAtIHdpbmRvd1RvcDtcbiAgICBjb25zdCB2aXNUb3AgPSB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldDtcbiAgICBjb25zdCB2aXNMZW4gPSB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgY29uc3QgYmFzZVN0eWxlID0ge3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAwfTtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAuLi5iYXNlU3R5bGUsXG4gICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgICBib3JkZXJDb2xvcjogJ2JsdWUnLFxuICAgICAgICAgIGJvcmRlcldpZHRoOiAxLFxuICAgICAgICB9fT5cbiAgICAgICAge2ZyYW1lc0luTGF5b3V0Lm1hcCgoZiwgaWkpID0+IChcbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAga2V5PXsnZicgKyBpaX1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIC4uLmJhc2VTdHlsZSxcbiAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgdG9wOiBmLm9mZnNldCAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBmLmxlbmd0aCAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnb3JhbmdlJyxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgKSl9XG4gICAgICAgIDxWaWV3XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC4uLmJhc2VTdHlsZSxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICB0b3A6IHdpbmRvd1RvcCAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIGhlaWdodDogd2luZG93TGVuICogbm9ybWFsaXplLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICBib3JkZXJXaWR0aDogMixcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAuLi5iYXNlU3R5bGUsXG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgdG9wOiB2aXNUb3AgKiBub3JtYWxpemUsXG4gICAgICAgICAgICBoZWlnaHQ6IHZpc0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAncmVkJyxcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOiAyLFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgfVxuXG4gIF9zZWxlY3RMZW5ndGgobWV0cmljczogJFJlYWRPbmx5PHtoZWlnaHQ6IG51bWJlciwgd2lkdGg6IG51bWJlcn0+KTogbnVtYmVyIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMuaG9yaXpvbnRhbCA/IG1ldHJpY3MuaGVpZ2h0IDogbWV0cmljcy53aWR0aDtcbiAgfVxuXG4gIF9zZWxlY3RPZmZzZXQobWV0cmljczogJFJlYWRPbmx5PHt4OiBudW1iZXIsIHk6IG51bWJlcn0+KTogbnVtYmVyIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMuaG9yaXpvbnRhbCA/IG1ldHJpY3MueSA6IG1ldHJpY3MueDtcbiAgfVxuXG4gIF9tYXliZUNhbGxPbkVuZFJlYWNoZWQoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YSxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIG9uRW5kUmVhY2hlZCxcbiAgICAgIG9uRW5kUmVhY2hlZFRocmVzaG9sZCxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7Y29udGVudExlbmd0aCwgdmlzaWJsZUxlbmd0aCwgb2Zmc2V0fSA9IHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gICAgY29uc3QgZGlzdGFuY2VGcm9tRW5kID0gY29udGVudExlbmd0aCAtIHZpc2libGVMZW5ndGggLSBvZmZzZXQ7XG4gICAgaWYgKFxuICAgICAgb25FbmRSZWFjaGVkICYmXG4gICAgICB0aGlzLnN0YXRlLmxhc3QgPT09IGdldEl0ZW1Db3VudChkYXRhKSAtIDEgJiZcbiAgICAgIC8qICRGbG93Rml4TWUoPj0wLjYzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjMgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzXG4gICAgICAgKiBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIGRpc3RhbmNlRnJvbUVuZCA8IG9uRW5kUmVhY2hlZFRocmVzaG9sZCAqIHZpc2libGVMZW5ndGggJiZcbiAgICAgICh0aGlzLl9oYXNEYXRhQ2hhbmdlZFNpbmNlRW5kUmVhY2hlZCB8fFxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggIT09IHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoKVxuICAgICkge1xuICAgICAgLy8gT25seSBjYWxsIG9uRW5kUmVhY2hlZCBvbmNlIGZvciBhIGdpdmVuIGRhdGFzZXQgKyBjb250ZW50IGxlbmd0aC5cbiAgICAgIHRoaXMuX2hhc0RhdGFDaGFuZ2VkU2luY2VFbmRSZWFjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zZW50RW5kRm9yQ29udGVudExlbmd0aCA9IHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aDtcbiAgICAgIG9uRW5kUmVhY2hlZCh7ZGlzdGFuY2VGcm9tRW5kfSk7XG4gICAgfVxuICB9XG5cbiAgX29uQ29udGVudFNpemVDaGFuZ2UgPSAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcbiAgICBpZiAoXG4gICAgICB3aWR0aCA+IDAgJiZcbiAgICAgIGhlaWdodCA+IDAgJiZcbiAgICAgIHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4ICE9IG51bGwgJiZcbiAgICAgIHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4ID4gMCAmJlxuICAgICAgIXRoaXMuX2hhc0RvbmVJbml0aWFsU2Nyb2xsXG4gICAgKSB7XG4gICAgICB0aGlzLnNjcm9sbFRvSW5kZXgoe1xuICAgICAgICBhbmltYXRlZDogZmFsc2UsXG4gICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5faGFzRG9uZUluaXRpYWxTY3JvbGwgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5vbkNvbnRlbnRTaXplQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29udGVudFNpemVDaGFuZ2Uod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aCh7aGVpZ2h0LCB3aWR0aH0pO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICB9O1xuXG4gIC8qIFRyYW5zbGF0ZXMgbWV0cmljcyBmcm9tIGEgc2Nyb2xsIGV2ZW50IGluIGEgcGFyZW50IFZpcnR1YWxpemVkTGlzdCBpbnRvXG4gICAqIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZSBjaGlsZCBsaXN0LlxuICAgKi9cbiAgX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzID0gKG1ldHJpY3M6IHtcbiAgICB2aXNpYmxlTGVuZ3RoOiBudW1iZXIsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gIH0pID0+IHtcbiAgICAvLyBPZmZzZXQgb2YgdGhlIHRvcCBvZiB0aGUgbmVzdGVkIGxpc3QgcmVsYXRpdmUgdG8gdGhlIHRvcCBvZiBpdHMgcGFyZW50J3Mgdmlld3BvcnRcbiAgICBjb25zdCBvZmZzZXQgPSBtZXRyaWNzLm9mZnNldCAtIHRoaXMuX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3Q7XG4gICAgLy8gQ2hpbGQncyB2aXNpYmxlIGxlbmd0aCBpcyB0aGUgc2FtZSBhcyBpdHMgcGFyZW50J3NcbiAgICBjb25zdCB2aXNpYmxlTGVuZ3RoID0gbWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuICAgIGNvbnN0IGRPZmZzZXQgPSBvZmZzZXQgLSB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldDtcbiAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICBjb250ZW50TGVuZ3RoLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZE9mZnNldCxcbiAgICB9O1xuICB9O1xuXG4gIF9vblNjcm9sbCA9IChlOiBPYmplY3QpID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25TY3JvbGwoZSk7XG4gICAgfSk7XG4gICAgaWYgKHRoaXMucHJvcHMub25TY3JvbGwpIHtcbiAgICAgIHRoaXMucHJvcHMub25TY3JvbGwoZSk7XG4gICAgfVxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGUudGltZVN0YW1wO1xuICAgIGxldCB2aXNpYmxlTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0TWVhc3VyZW1lbnQpO1xuICAgIGxldCBjb250ZW50TGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQuY29udGVudFNpemUpO1xuICAgIGxldCBvZmZzZXQgPSB0aGlzLl9zZWxlY3RPZmZzZXQoZS5uYXRpdmVFdmVudC5jb250ZW50T2Zmc2V0KTtcbiAgICBsZXQgZE9mZnNldCA9IG9mZnNldCAtIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0O1xuXG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICBpZiAodGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIElnbm9yZSBzY3JvbGwgZXZlbnRzIHVudGlsIG9uTGF5b3V0IGhhcyBiZWVuIGNhbGxlZCBhbmQgd2VcbiAgICAgICAgLy8ga25vdyBvdXIgb2Zmc2V0IGZyb20gb3VyIG9mZnNldCBmcm9tIG91ciBwYXJlbnRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgKHtcbiAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgY29udGVudExlbmd0aCxcbiAgICAgICAgb2Zmc2V0LFxuICAgICAgICBkT2Zmc2V0LFxuICAgICAgfSA9IHRoaXMuX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzKHtcbiAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgb2Zmc2V0LFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGR0ID0gdGhpcy5fc2Nyb2xsTWV0cmljcy50aW1lc3RhbXBcbiAgICAgID8gTWF0aC5tYXgoMSwgdGltZXN0YW1wIC0gdGhpcy5fc2Nyb2xsTWV0cmljcy50aW1lc3RhbXApXG4gICAgICA6IDE7XG4gICAgY29uc3QgdmVsb2NpdHkgPSBkT2Zmc2V0IC8gZHQ7XG5cbiAgICBpZiAoXG4gICAgICBkdCA+IDUwMCAmJlxuICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5kdCA+IDUwMCAmJlxuICAgICAgY29udGVudExlbmd0aCA+IDUgKiB2aXNpYmxlTGVuZ3RoICYmXG4gICAgICAhdGhpcy5faGFzV2FybmVkLnBlcmZcbiAgICApIHtcbiAgICAgIGluZm9Mb2coXG4gICAgICAgICdWaXJ0dWFsaXplZExpc3Q6IFlvdSBoYXZlIGEgbGFyZ2UgbGlzdCB0aGF0IGlzIHNsb3cgdG8gdXBkYXRlIC0gbWFrZSBzdXJlIHlvdXIgJyArXG4gICAgICAgICAgJ3JlbmRlckl0ZW0gZnVuY3Rpb24gcmVuZGVycyBjb21wb25lbnRzIHRoYXQgZm9sbG93IFJlYWN0IHBlcmZvcm1hbmNlIGJlc3QgcHJhY3RpY2VzICcgK1xuICAgICAgICAgICdsaWtlIFB1cmVDb21wb25lbnQsIHNob3VsZENvbXBvbmVudFVwZGF0ZSwgZXRjLicsXG4gICAgICAgIHtkdCwgcHJldkR0OiB0aGlzLl9zY3JvbGxNZXRyaWNzLmR0LCBjb250ZW50TGVuZ3RofSxcbiAgICAgICk7XG4gICAgICB0aGlzLl9oYXNXYXJuZWQucGVyZiA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MgPSB7XG4gICAgICBjb250ZW50TGVuZ3RoLFxuICAgICAgZHQsXG4gICAgICBkT2Zmc2V0LFxuICAgICAgb2Zmc2V0LFxuICAgICAgdGltZXN0YW1wLFxuICAgICAgdmVsb2NpdHksXG4gICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgIH07XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyh0aGlzLnByb3BzLmRhdGEpO1xuICAgIGlmICghdGhpcy5wcm9wcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9tYXliZUNhbGxPbkVuZFJlYWNoZWQoKTtcbiAgICBpZiAodmVsb2NpdHkgIT09IDApIHtcbiAgICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyLmFjdGl2YXRlKCk7XG4gICAgfVxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgfTtcblxuICBfc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCkge1xuICAgIGNvbnN0IHtmaXJzdCwgbGFzdH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtvZmZzZXQsIHZpc2libGVMZW5ndGgsIHZlbG9jaXR5fSA9IHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKTtcbiAgICBsZXQgaGlQcmkgPSBmYWxzZTtcbiAgICBjb25zdCBzY3JvbGxpbmdUaHJlc2hvbGQgPVxuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuNjMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42MyB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlXG4gICAgICAgKiB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgKHRoaXMucHJvcHMub25FbmRSZWFjaGVkVGhyZXNob2xkICogdmlzaWJsZUxlbmd0aCkgLyAyO1xuICAgIC8vIE1hcmsgYXMgaGlnaCBwcmlvcml0eSBpZiB3ZSdyZSBjbG9zZSB0byB0aGUgc3RhcnQgb2YgdGhlIGZpcnN0IGl0ZW1cbiAgICAvLyBCdXQgb25seSBpZiB0aGVyZSBhcmUgaXRlbXMgYmVmb3JlIHRoZSBmaXJzdCByZW5kZXJlZCBpdGVtXG4gICAgaWYgKGZpcnN0ID4gMCkge1xuICAgICAgY29uc3QgZGlzdFRvcCA9IG9mZnNldCAtIHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChmaXJzdCkub2Zmc2V0O1xuICAgICAgaGlQcmkgPVxuICAgICAgICBoaVByaSB8fCBkaXN0VG9wIDwgMCB8fCAodmVsb2NpdHkgPCAtMiAmJiBkaXN0VG9wIDwgc2Nyb2xsaW5nVGhyZXNob2xkKTtcbiAgICB9XG4gICAgLy8gTWFyayBhcyBoaWdoIHByaW9yaXR5IGlmIHdlJ3JlIGNsb3NlIHRvIHRoZSBlbmQgb2YgdGhlIGxhc3QgaXRlbVxuICAgIC8vIEJ1dCBvbmx5IGlmIHRoZXJlIGFyZSBpdGVtcyBhZnRlciB0aGUgbGFzdCByZW5kZXJlZCBpdGVtXG4gICAgaWYgKGxhc3QgPCBpdGVtQ291bnQgLSAxKSB7XG4gICAgICBjb25zdCBkaXN0Qm90dG9tID1cbiAgICAgICAgdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3QpLm9mZnNldCAtIChvZmZzZXQgKyB2aXNpYmxlTGVuZ3RoKTtcbiAgICAgIGhpUHJpID1cbiAgICAgICAgaGlQcmkgfHxcbiAgICAgICAgZGlzdEJvdHRvbSA8IDAgfHxcbiAgICAgICAgKHZlbG9jaXR5ID4gMiAmJiBkaXN0Qm90dG9tIDwgc2Nyb2xsaW5nVGhyZXNob2xkKTtcbiAgICB9XG4gICAgLy8gT25seSB0cmlnZ2VyIGhpZ2gtcHJpb3JpdHkgdXBkYXRlcyBpZiB3ZSd2ZSBhY3R1YWxseSByZW5kZXJlZCBjZWxscyxcbiAgICAvLyBhbmQgd2l0aCB0aGF0IHNpemUgZXN0aW1hdGUsIGFjY3VyYXRlbHkgY29tcHV0ZSBob3cgbWFueSBjZWxscyB3ZSBzaG91bGQgcmVuZGVyLlxuICAgIC8vIE90aGVyd2lzZSwgaXQgd291bGQganVzdCByZW5kZXIgYXMgbWFueSBjZWxscyBhcyBpdCBjYW4gKG9mIHplcm8gZGltZW5zaW9uKSxcbiAgICAvLyBlYWNoIHRpbWUgdGhyb3VnaCBhdHRlbXB0aW5nIHRvIHJlbmRlciBtb3JlIChsaW1pdGVkIGJ5IG1heFRvUmVuZGVyUGVyQmF0Y2gpLFxuICAgIC8vIHN0YXJ2aW5nIHRoZSByZW5kZXJlciBmcm9tIGFjdHVhbGx5IGxheWluZyBvdXQgdGhlIG9iamVjdHMgYW5kIGNvbXB1dGluZyBfYXZlcmFnZUNlbGxMZW5ndGguXG4gICAgaWYgKGhpUHJpICYmIHRoaXMuX2F2ZXJhZ2VDZWxsTGVuZ3RoKSB7XG4gICAgICAvLyBEb24ndCB3b3JyeSBhYm91dCBpbnRlcmFjdGlvbnMgd2hlbiBzY3JvbGxpbmcgcXVpY2tseTsgZm9jdXMgb24gZmlsbGluZyBjb250ZW50IGFzIGZhc3RcbiAgICAgIC8vIGFzIHBvc3NpYmxlLlxuICAgICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIuZGlzcG9zZSh7YWJvcnQ6IHRydWV9KTtcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIuc2NoZWR1bGUoKTtcbiAgICB9XG4gIH1cblxuICBfb25TY3JvbGxCZWdpbkRyYWcgPSAoZSk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLl9vblNjcm9sbEJlZ2luRHJhZyhlKTtcbiAgICB9KTtcbiAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgIHR1cGxlLnZpZXdhYmlsaXR5SGVscGVyLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5faGFzSW50ZXJhY3RlZCA9IHRydWU7XG4gICAgdGhpcy5wcm9wcy5vblNjcm9sbEJlZ2luRHJhZyAmJiB0aGlzLnByb3BzLm9uU2Nyb2xsQmVnaW5EcmFnKGUpO1xuICB9O1xuXG4gIF9vblNjcm9sbEVuZERyYWcgPSAoZSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHt2ZWxvY2l0eX0gPSBlLm5hdGl2ZUV2ZW50O1xuICAgIGlmICh2ZWxvY2l0eSkge1xuICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52ZWxvY2l0eSA9IHRoaXMuX3NlbGVjdE9mZnNldCh2ZWxvY2l0eSk7XG4gICAgfVxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgICB0aGlzLnByb3BzLm9uU2Nyb2xsRW5kRHJhZyAmJiB0aGlzLnByb3BzLm9uU2Nyb2xsRW5kRHJhZyhlKTtcbiAgfTtcblxuICBfb25Nb21lbnR1bVNjcm9sbEVuZCA9IChlKTogdm9pZCA9PiB7XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52ZWxvY2l0eSA9IDA7XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEVuZCAmJiB0aGlzLnByb3BzLm9uTW9tZW50dW1TY3JvbGxFbmQoZSk7XG4gIH07XG5cbiAgX3VwZGF0ZUNlbGxzVG9SZW5kZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qge2RhdGEsIGdldEl0ZW1Db3VudCwgb25FbmRSZWFjaGVkVGhyZXNob2xkfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkID0gdGhpcy5faXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKCk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyhkYXRhKTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiB7XG4gICAgICBsZXQgbmV3U3RhdGU7XG4gICAgICBpZiAoIWlzVmlydHVhbGl6YXRpb25EaXNhYmxlZCkge1xuICAgICAgICAvLyBJZiB3ZSBydW4gdGhpcyB3aXRoIGJvZ3VzIGRhdGEsIHdlJ2xsIGZvcmNlLXJlbmRlciB3aW5kb3cge2ZpcnN0OiAwLCBsYXN0OiAwfSxcbiAgICAgICAgLy8gYW5kIHdpcGUgb3V0IHRoZSBpbml0aWFsTnVtVG9SZW5kZXIgcmVuZGVyZWQgZWxlbWVudHMuXG4gICAgICAgIC8vIFNvIGxldCdzIHdhaXQgdW50aWwgdGhlIHNjcm9sbCB2aWV3IG1ldHJpY3MgaGF2ZSBiZWVuIHNldCB1cC4gQW5kIHVudGlsIHRoZW4sXG4gICAgICAgIC8vIHdlIHdpbGwgdHJ1c3QgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciBzdWdnZXN0aW9uXG4gICAgICAgIGlmICh0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgbm9uLXplcm8gaW5pdGlhbFNjcm9sbEluZGV4IGFuZCBydW4gdGhpcyBiZWZvcmUgd2UndmUgc2Nyb2xsZWQsXG4gICAgICAgICAgLy8gd2UnbGwgd2lwZSBvdXQgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciByZW5kZXJlZCBlbGVtZW50cyBzdGFydGluZyBhdCBpbml0aWFsU2Nyb2xsSW5kZXguXG4gICAgICAgICAgLy8gU28gbGV0J3Mgd2FpdCB1bnRpbCB3ZSd2ZSBzY3JvbGxlZCB0aGUgdmlldyB0byB0aGUgcmlnaHQgcGxhY2UuIEFuZCB1bnRpbCB0aGVuLFxuICAgICAgICAgIC8vIHdlIHdpbGwgdHJ1c3QgdGhlIGluaXRpYWxTY3JvbGxJbmRleCBzdWdnZXN0aW9uLlxuICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggfHwgdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQpIHtcbiAgICAgICAgICAgIG5ld1N0YXRlID0gY29tcHV0ZVdpbmRvd2VkUmVuZGVyTGltaXRzKFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94LFxuICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHtjb250ZW50TGVuZ3RoLCBvZmZzZXQsIHZpc2libGVMZW5ndGh9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICAgICAgY29uc3QgZGlzdGFuY2VGcm9tRW5kID0gY29udGVudExlbmd0aCAtIHZpc2libGVMZW5ndGggLSBvZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlbmRlckFoZWFkID1cbiAgICAgICAgICAvKiAkRmxvd0ZpeE1lKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3Nlc1xuICAgICAgICAgICAqIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42MyB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3JcbiAgICAgICAgICAgKiBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgICAgICBkaXN0YW5jZUZyb21FbmQgPCBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoXG4gICAgICAgICAgICA/IHRoaXMucHJvcHMubWF4VG9SZW5kZXJQZXJCYXRjaFxuICAgICAgICAgICAgOiAwO1xuICAgICAgICBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICBmaXJzdDogMCxcbiAgICAgICAgICBsYXN0OiBNYXRoLm1pbihzdGF0ZS5sYXN0ICsgcmVuZGVyQWhlYWQsIGdldEl0ZW1Db3VudChkYXRhKSAtIDEpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKG5ld1N0YXRlICYmIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuc2l6ZSA+IDApIHtcbiAgICAgICAgY29uc3QgbmV3Rmlyc3QgPSBuZXdTdGF0ZS5maXJzdDtcbiAgICAgICAgY29uc3QgbmV3TGFzdCA9IG5ld1N0YXRlLmxhc3Q7XG4gICAgICAgIC8vIElmIHNvbWUgY2VsbCBpbiB0aGUgbmV3IHN0YXRlIGhhcyBhIGNoaWxkIGxpc3QgaW4gaXQsIHdlIHNob3VsZCBvbmx5IHJlbmRlclxuICAgICAgICAvLyB1cCB0aHJvdWdoIHRoYXQgaXRlbSwgc28gdGhhdCB3ZSBnaXZlIHRoYXQgbGlzdCBhIGNoYW5jZSB0byByZW5kZXIuXG4gICAgICAgIC8vIE90aGVyd2lzZSB0aGVyZSdzIGNodXJuIGZyb20gbXVsdGlwbGUgY2hpbGQgbGlzdHMgbW91bnRpbmcgYW5kIHVuLW1vdW50aW5nXG4gICAgICAgIC8vIHRoZWlyIGl0ZW1zLlxuICAgICAgICBmb3IgKGxldCBpaSA9IG5ld0ZpcnN0OyBpaSA8PSBuZXdMYXN0OyBpaSsrKSB7XG4gICAgICAgICAgY29uc3QgY2VsbEtleUZvckluZGV4ID0gdGhpcy5faW5kaWNlc1RvS2V5cy5nZXQoaWkpO1xuICAgICAgICAgIGNvbnN0IGNoaWxkTGlzdEtleXMgPVxuICAgICAgICAgICAgY2VsbEtleUZvckluZGV4ICYmXG4gICAgICAgICAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5nZXQoY2VsbEtleUZvckluZGV4KTtcbiAgICAgICAgICBpZiAoIWNoaWxkTGlzdEtleXMpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgc29tZUNoaWxkSGFzTW9yZSA9IGZhbHNlO1xuICAgICAgICAgIC8vIEZvciBlYWNoIGNlbGwsIG5lZWQgdG8gY2hlY2sgd2hldGhlciBhbnkgY2hpbGQgbGlzdCBpbiBpdCBoYXMgbW9yZSBlbGVtZW50cyB0byByZW5kZXJcbiAgICAgICAgICBmb3IgKGxldCBjaGlsZEtleSBvZiBjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZExpc3QgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChjaGlsZEtleSk7XG4gICAgICAgICAgICBpZiAoY2hpbGRMaXN0ICYmIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5oYXNNb3JlKCkpIHtcbiAgICAgICAgICAgICAgc29tZUNoaWxkSGFzTW9yZSA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc29tZUNoaWxkSGFzTW9yZSkge1xuICAgICAgICAgICAgbmV3U3RhdGUubGFzdCA9IGlpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfSk7XG4gIH07XG5cbiAgX2NyZWF0ZVZpZXdUb2tlbiA9IChpbmRleDogbnVtYmVyLCBpc1ZpZXdhYmxlOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3Qge2RhdGEsIGdldEl0ZW0sIGtleUV4dHJhY3Rvcn0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKGRhdGEsIGluZGV4KTtcbiAgICByZXR1cm4ge2luZGV4LCBpdGVtLCBrZXk6IGtleUV4dHJhY3RvcihpdGVtLCBpbmRleCksIGlzVmlld2FibGV9O1xuICB9O1xuXG4gIF9nZXRGcmFtZU1ldHJpY3NBcHByb3ggPSAoXG4gICAgaW5kZXg6IG51bWJlcixcbiAgKToge2xlbmd0aDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlcn0gPT4ge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGluZGV4KTtcbiAgICBpZiAoZnJhbWUgJiYgZnJhbWUuaW5kZXggPT09IGluZGV4KSB7XG4gICAgICAvLyBjaGVjayBmb3IgaW52YWxpZCBmcmFtZXMgZHVlIHRvIHJvdyByZS1vcmRlcmluZ1xuICAgICAgcmV0dXJuIGZyYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7Z2V0SXRlbUxheW91dH0gPSB0aGlzLnByb3BzO1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICAhZ2V0SXRlbUxheW91dCxcbiAgICAgICAgJ1Nob3VsZCBub3QgaGF2ZSB0byBlc3RpbWF0ZSBmcmFtZXMgd2hlbiBhIG1lYXN1cmVtZW50IG1ldHJpY3MgZnVuY3Rpb24gaXMgcHJvdmlkZWQnLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlbmd0aDogdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGgsXG4gICAgICAgIG9mZnNldDogdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGggKiBpbmRleCxcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIF9nZXRGcmFtZU1ldHJpY3MgPSAoXG4gICAgaW5kZXg6IG51bWJlcixcbiAgKTogP3tcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGluTGF5b3V0PzogYm9vbGVhbixcbiAgfSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YSxcbiAgICAgIGdldEl0ZW0sXG4gICAgICBnZXRJdGVtQ291bnQsXG4gICAgICBnZXRJdGVtTGF5b3V0LFxuICAgICAga2V5RXh0cmFjdG9yLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGludmFyaWFudChcbiAgICAgIGdldEl0ZW1Db3VudChkYXRhKSA+IGluZGV4LFxuICAgICAgJ1RyaWVkIHRvIGdldCBmcmFtZSBmb3Igb3V0IG9mIHJhbmdlIGluZGV4ICcgKyBpbmRleCxcbiAgICApO1xuICAgIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKGRhdGEsIGluZGV4KTtcbiAgICBsZXQgZnJhbWUgPSBpdGVtICYmIHRoaXMuX2ZyYW1lc1trZXlFeHRyYWN0b3IoaXRlbSwgaW5kZXgpXTtcbiAgICBpZiAoIWZyYW1lIHx8IGZyYW1lLmluZGV4ICE9PSBpbmRleCkge1xuICAgICAgaWYgKGdldEl0ZW1MYXlvdXQpIHtcbiAgICAgICAgZnJhbWUgPSBnZXRJdGVtTGF5b3V0KGRhdGEsIGluZGV4KTtcbiAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICBjb25zdCBmcmFtZVR5cGUgPSBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgbGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgICAgICBvZmZzZXQ6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIGluZGV4OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgICAgfSkuaXNSZXF1aXJlZDtcbiAgICAgICAgICBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoXG4gICAgICAgICAgICB7ZnJhbWU6IGZyYW1lVHlwZX0sXG4gICAgICAgICAgICB7ZnJhbWV9LFxuICAgICAgICAgICAgJ2ZyYW1lJyxcbiAgICAgICAgICAgICdWaXJ0dWFsaXplZExpc3QuZ2V0SXRlbUxheW91dCcsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKiAkRmxvd0ZpeE1lKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42MyB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlIHRoaXNcbiAgICAgKiBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICByZXR1cm4gZnJhbWU7XG4gIH07XG5cbiAgX3VwZGF0ZVZpZXdhYmxlSXRlbXMoZGF0YTogYW55KSB7XG4gICAgY29uc3Qge2dldEl0ZW1Db3VudH0gPSB0aGlzLnByb3BzO1xuXG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5vblVwZGF0ZShcbiAgICAgICAgZ2V0SXRlbUNvdW50KGRhdGEpLFxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldCxcbiAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoLFxuICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3MsXG4gICAgICAgIHRoaXMuX2NyZWF0ZVZpZXdUb2tlbixcbiAgICAgICAgdHVwbGUub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICAgdGhpcy5zdGF0ZSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgQ2VsbFJlbmRlcmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFxuICB7XG4gICAgQ2VsbFJlbmRlcmVyQ29tcG9uZW50PzogP1JlYWN0LkNvbXBvbmVudFR5cGU8YW55PixcbiAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50OiA/UmVhY3QuQ29tcG9uZW50VHlwZTwqPixcbiAgICBjZWxsS2V5OiBzdHJpbmcsXG4gICAgZmlsbFJhdGVIZWxwZXI6IEZpbGxSYXRlSGVscGVyLFxuICAgIGhvcml6b250YWw6ID9ib29sZWFuLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgaW52ZXJzaW9uU3R5bGU6ID9EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcCxcbiAgICBpdGVtOiBJdGVtLFxuICAgIG9uTGF5b3V0OiAoZXZlbnQ6IE9iamVjdCkgPT4gdm9pZCwgLy8gVGhpcyBpcyBleHRyYWN0ZWQgYnkgU2Nyb2xsVmlld1N0aWNreUhlYWRlclxuICAgIG9uVW5tb3VudDogKGNlbGxLZXk6IHN0cmluZykgPT4gdm9pZCxcbiAgICBvblVwZGF0ZVNlcGFyYXRvcnM6IChjZWxsS2V5czogQXJyYXk8P3N0cmluZz4sIHByb3BzOiBPYmplY3QpID0+IHZvaWQsXG4gICAgcGFyZW50UHJvcHM6IHtcbiAgICAgIGdldEl0ZW1MYXlvdXQ/OiA/RnVuY3Rpb24sXG4gICAgICByZW5kZXJJdGVtOiByZW5kZXJJdGVtVHlwZSxcbiAgICB9LFxuICAgIHByZXZDZWxsS2V5OiA/c3RyaW5nLFxuICB9LFxuICAkRmxvd0ZpeE1lU3RhdGUsXG4+IHtcbiAgc3RhdGUgPSB7XG4gICAgc2VwYXJhdG9yUHJvcHM6IHtcbiAgICAgIGhpZ2hsaWdodGVkOiBmYWxzZSxcbiAgICAgIGxlYWRpbmdJdGVtOiB0aGlzLnByb3BzLml0ZW0sXG4gICAgfSxcbiAgfTtcblxuICBzdGF0aWMgY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gICAgdmlydHVhbGl6ZWRDZWxsOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgY2VsbEtleTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB9KSxcbiAgfTtcblxuICBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpcnR1YWxpemVkQ2VsbDoge1xuICAgICAgICBjZWxsS2V5OiB0aGlzLnByb3BzLmNlbGxLZXksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPOiBjb25zaWRlciBmYWN0b3Jpbmcgc2VwYXJhdG9yIHN0dWZmIG91dCBvZiBWaXJ0dWFsaXplZExpc3QgaW50byBGbGF0TGlzdCBzaW5jZSBpdCdzIG5vdFxuICAvLyByZXVzZWQgYnkgU2VjdGlvbkxpc3QgYW5kIHdlIGNhbiBrZWVwIFZpcnR1YWxpemVkTGlzdCBzaW1wbGVyLlxuICBfc2VwYXJhdG9ycyA9IHtcbiAgICBoaWdobGlnaHQ6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoW2NlbGxLZXksIHByZXZDZWxsS2V5XSwge1xuICAgICAgICBoaWdobGlnaHRlZDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5oaWdobGlnaHQ6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoW2NlbGxLZXksIHByZXZDZWxsS2V5XSwge1xuICAgICAgICBoaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHVwZGF0ZVByb3BzOiAoc2VsZWN0OiAnbGVhZGluZycgfCAndHJhaWxpbmcnLCBuZXdQcm9wczogT2JqZWN0KSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbEtleSwgcHJldkNlbGxLZXl9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMucHJvcHMub25VcGRhdGVTZXBhcmF0b3JzKFxuICAgICAgICBbc2VsZWN0ID09PSAnbGVhZGluZycgPyBwcmV2Q2VsbEtleSA6IGNlbGxLZXldLFxuICAgICAgICBuZXdQcm9wcyxcbiAgICAgICk7XG4gICAgfSxcbiAgfTtcblxuICB1cGRhdGVTZXBhcmF0b3JQcm9wcyhuZXdQcm9wczogT2JqZWN0KSB7XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgc2VwYXJhdG9yUHJvcHM6IHsuLi5zdGF0ZS5zZXBhcmF0b3JQcm9wcywgLi4ubmV3UHJvcHN9LFxuICAgIH0pKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucHJvcHMub25Vbm1vdW50KHRoaXMucHJvcHMuY2VsbEtleSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgQ2VsbFJlbmRlcmVyQ29tcG9uZW50LFxuICAgICAgSXRlbVNlcGFyYXRvckNvbXBvbmVudCxcbiAgICAgIGZpbGxSYXRlSGVscGVyLFxuICAgICAgaG9yaXpvbnRhbCxcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleCxcbiAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgcGFyZW50UHJvcHMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge3JlbmRlckl0ZW0sIGdldEl0ZW1MYXlvdXR9ID0gcGFyZW50UHJvcHM7XG4gICAgaW52YXJpYW50KHJlbmRlckl0ZW0sICdubyByZW5kZXJJdGVtIScpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSByZW5kZXJJdGVtKHtcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleCxcbiAgICAgIHNlcGFyYXRvcnM6IHRoaXMuX3NlcGFyYXRvcnMsXG4gICAgfSk7XG4gICAgY29uc3Qgb25MYXlvdXQgPVxuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuNjguMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42OCB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlIHRoaXNcbiAgICAgICAqIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgZ2V0SXRlbUxheW91dCAmJiAhcGFyZW50UHJvcHMuZGVidWcgJiYgIWZpbGxSYXRlSGVscGVyLmVuYWJsZWQoKVxuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IHRoaXMucHJvcHMub25MYXlvdXQ7XG4gICAgLy8gTk9URTogdGhhdCB3aGVuIHRoaXMgaXMgYSBzdGlja3kgaGVhZGVyLCBgb25MYXlvdXRgIHdpbGwgZ2V0IGF1dG9tYXRpY2FsbHkgZXh0cmFjdGVkIGFuZFxuICAgIC8vIGNhbGxlZCBleHBsaWNpdGx5IGJ5IGBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyYC5cbiAgICBjb25zdCBpdGVtU2VwYXJhdG9yID0gSXRlbVNlcGFyYXRvckNvbXBvbmVudCAmJiAoXG4gICAgICA8SXRlbVNlcGFyYXRvckNvbXBvbmVudCB7Li4udGhpcy5zdGF0ZS5zZXBhcmF0b3JQcm9wc30gLz5cbiAgICApO1xuICAgIGNvbnN0IGNlbGxTdHlsZSA9IGludmVyc2lvblN0eWxlXG4gICAgICA/IGhvcml6b250YWxcbiAgICAgICAgPyBbe2ZsZXhEaXJlY3Rpb246ICdyb3ctcmV2ZXJzZSd9LCBpbnZlcnNpb25TdHlsZV1cbiAgICAgICAgOiBbe2ZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZSd9LCBpbnZlcnNpb25TdHlsZV1cbiAgICAgIDogaG9yaXpvbnRhbFxuICAgICAgICA/IFt7ZmxleERpcmVjdGlvbjogJ3Jvdyd9LCBpbnZlcnNpb25TdHlsZV1cbiAgICAgICAgOiBpbnZlcnNpb25TdHlsZTtcbiAgICBpZiAoIUNlbGxSZW5kZXJlckNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFZpZXcgc3R5bGU9e2NlbGxTdHlsZX0gb25MYXlvdXQ9e29uTGF5b3V0fT5cbiAgICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAgICB7aXRlbVNlcGFyYXRvcn1cbiAgICAgICAgPC9WaWV3PlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxDZWxsUmVuZGVyZXJDb21wb25lbnRcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHN0eWxlPXtjZWxsU3R5bGV9XG4gICAgICAgIG9uTGF5b3V0PXtvbkxheW91dH0+XG4gICAgICAgIHtlbGVtZW50fVxuICAgICAgICB7aXRlbVNlcGFyYXRvcn1cbiAgICAgIDwvQ2VsbFJlbmRlcmVyQ29tcG9uZW50PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgVmlydHVhbGl6ZWRDZWxsV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDx7XG4gIGNlbGxLZXk6IHN0cmluZyxcbiAgY2hpbGRyZW46IFJlYWN0Lk5vZGUsXG59PiB7XG4gIHN0YXRpYyBjaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgICB2aXJ0dWFsaXplZENlbGw6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBjZWxsS2V5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIH0pLFxuICB9O1xuXG4gIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmlydHVhbGl6ZWRDZWxsOiB7XG4gICAgICAgIGNlbGxLZXk6IHRoaXMucHJvcHMuY2VsbEtleSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIHZlcnRpY2FsbHlJbnZlcnRlZDoge1xuICAgIHRyYW5zZm9ybTogW3tzY2FsZVk6IC0xfV0sXG4gIH0sXG4gIGhvcml6b250YWxseUludmVydGVkOiB7XG4gICAgdHJhbnNmb3JtOiBbe3NjYWxlWDogLTF9XSxcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxpemVkTGlzdDtcbiJdfQ==